"use strict";(()=>{var a={};a.id=709,a.ids=[709],a.modules={9344:a=>{a.exports=require("jsonwebtoken")},145:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(a,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function a(e,t){return t in e?e[t]:"then"in e&&"function"==typeof e.then?e.then(e=>a(e,t)):"function"==typeof e&&"default"===t?e:void 0}}})},788:(a,e,t)=>{t.r(e),t.d(e,{config:()=>c,default:()=>m,routeModule:()=>f});var n={};t.r(n),t.d(n,{default:()=>l});var s=t(1802),r=t(7153),i=t(6249),u=t(3382);let d=[{id:1,nama:"John Doe",email:"john@afms.com",jabatan_id:1,jabatan:{nama:"Manager"},cabang_id:1,cabang:{nama:"Cabang Utama"},telepon:"081234567890",alamat:"Jl. Contoh No. 123",tanggal_masuk:"2023-01-15",fingerprint_id:"FP001",status:"aktif",created_at:"2023-01-15T00:00:00.000Z",updated_at:"2023-01-15T00:00:00.000Z"},{id:2,nama:"Jane Smith",email:"jane@afms.com",jabatan_id:2,jabatan:{nama:"Staff"},cabang_id:1,cabang:{nama:"Cabang Utama"},telepon:"081234567891",alamat:"Jl. Contoh No. 124",tanggal_masuk:"2023-02-01",fingerprint_id:"FP002",status:"aktif",created_at:"2023-02-01T00:00:00.000Z",updated_at:"2023-02-01T00:00:00.000Z"}];async function o(a,e){let{id:t}=a.query,n=parseInt(t);try{switch(a.method){case"GET":let t=d.find(a=>a.id===n);if(!t)return e.status(404).json({message:"Karyawan not found"});return e.status(200).json({success:!0,data:t});case"PUT":let s=d.findIndex(a=>a.id===n);if(-1===s)return e.status(404).json({message:"Karyawan not found"});let{nama:r,email:i,jabatan_id:u,cabang_id:o,telepon:l,alamat:m,tanggal_masuk:c,finger_id:f,status:g}=a.body;if(i&&d.find(a=>a.email===i&&a.id!==n))return e.status(400).json({message:"Email already exists"});let p={...d[s],nama:r||d[s].nama,email:i||d[s].email,jabatan_id:u?parseInt(u):d[s].jabatan_id,cabang_id:o?parseInt(o):d[s].cabang_id,telepon:void 0!==l?l:d[s].telepon,alamat:void 0!==m?m:d[s].alamat,tanggal_masuk:c||d[s].tanggal_masuk,fingerprint_id:void 0!==f?f:d[s].fingerprint_id,status:g||d[s].status,updated_at:new Date().toISOString()};return d[s]=p,e.status(200).json({success:!0,message:"Karyawan updated successfully",data:p});case"DELETE":let _=d.findIndex(a=>a.id===n);if(-1===_)return e.status(404).json({message:"Karyawan not found"});return d.splice(_,1),e.status(200).json({success:!0,message:"Karyawan deleted successfully"});default:return e.status(405).json({message:"Method not allowed"})}}catch(a){return e.status(500).json({message:"Internal server error"})}}let l=(0,u.c)(o),m=(0,i.l)(n,"default"),c=(0,i.l)(n,"config"),f=new s.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/karyawan/[id]",pathname:"/api/karyawan/[id]",bundlePath:"",filename:""},userland:n})},3382:(a,e,t)=>{t.d(e,{Q:()=>r,c:()=>i});var n=t(9344),s=t.n(n);function r(a,e){return async(t,n)=>{try{let r=t.headers.authorization;if(!r||!r.startsWith("Bearer "))return n.status(401).json({message:"No token provided"});let i=r.substring(7),u=s().verify(i,"your-super-secret-jwt-key-here-development");if(!u||!u.id)return n.status(401).json({message:"Invalid token"});if(t.user={id:u.id,userId:parseInt(u.id)||1,email:u.email||"",name:u.name||"",role:u.role||"admin"},e&&!(Array.isArray(e)?e:[e]).includes(t.user.role))return n.status(403).json({message:"Insufficient permissions"});return await a(t,n)}catch(a){return n.status(401).json({message:"Invalid token"})}}}function i(a){return r(a,"admin")}},7153:(a,e)=>{var t;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return t}}),function(a){a.PAGES="PAGES",a.PAGES_API="PAGES_API",a.APP_PAGE="APP_PAGE",a.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(a,e,t)=>{a.exports=t(145)}};var e=require("../../../webpack-api-runtime.js");e.C(a);var t=e(e.s=788);module.exports=t})();