"use strict";(()=>{var e={};e.id=316,e.ids=[316],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},4522:(e,t,a)=>{a.r(t),a.d(t,{config:()=>g,default:()=>y,routeModule:()=>f});var n={};a.r(n),a.d(n,{default:()=>l});var s=a(1802),r=a(7153),i=a(6249);let u=[{id:1,name:"Potongan Keterlambatan",type:"deduction",category:"attendance",calculation_method:"per_minute",amount:1e3,conditions:{min_threshold:15},description:"Potongan Rp 1.000 per menit untuk keterlambatan lebih dari 15 menit",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:2,name:"Potongan Alpha",type:"deduction",category:"attendance",calculation_method:"per_occurrence",amount:5e4,conditions:{},description:"Potongan Rp 50.000 per hari alpha",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:3,name:"Potongan Pulang Cepat",type:"deduction",category:"attendance",calculation_method:"per_minute",amount:500,conditions:{min_threshold:30},description:"Potongan Rp 500 per menit untuk pulang lebih dari 30 menit sebelum jam kerja",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:4,name:"Tunjangan Kehadiran",type:"allowance",category:"attendance",calculation_method:"fixed_amount",amount:1e5,conditions:{min_threshold:22},description:"Tunjangan kehadiran Rp 100.000 untuk minimal 22 hari hadir",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:5,name:"Tunjangan Lembur",type:"allowance",category:"overtime",calculation_method:"per_minute",amount:2e3,conditions:{},description:"Tunjangan lembur Rp 2.000 per menit",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],o=[{id:1,name:"Gaji Pokok",type:"basic",amount:0,is_taxable:!0,is_active:!0},{id:2,name:"Tunjangan Transport",type:"allowance",amount:3e5,is_taxable:!0,is_active:!0},{id:3,name:"Tunjangan Makan",type:"allowance",amount:4e5,is_taxable:!0,is_active:!0},{id:4,name:"BPJS Kesehatan",type:"deduction",amount:1,is_taxable:!1,is_active:!0},{id:5,name:"BPJS Ketenagakerjaan",type:"deduction",amount:2,is_taxable:!1,is_active:!0}],c={id:1,working_days_per_month:22,working_hours_per_day:8,overtime_multiplier:1.5,late_tolerance_minutes:15,early_leave_tolerance_minutes:30,minimum_working_hours:7,tax_percentage:5,updated_at:"2024-01-01T00:00:00Z"};async function l(e,t){try{switch(e.method){case"GET":return d(e,t);case"POST":return m(e,t);case"PUT":return p(e,t);case"DELETE":return _(e,t);default:return t.status(405).json({success:!1,message:"Method not allowed"})}}catch(e){return t.status(500).json({success:!1,message:"Internal server error"})}}async function d(e,t){let{type:a,category:n}=e.query;if("settings"===a)return t.status(200).json({success:!0,data:c,message:"Payroll settings retrieved successfully"});if("components"===a){let e=o;return n&&(e=e.filter(e=>e.type===n)),t.status(200).json({success:!0,data:e,message:"Salary components retrieved successfully"})}let s=u;return a&&"all"!==a&&(s=s.filter(e=>e.type===a)),n&&"all"!==n&&(s=s.filter(e=>e.category===n)),t.status(200).json({success:!0,data:s,message:"Payroll rules retrieved successfully"})}async function m(e,t){let{type:a}=e.query;if("rule"===a){let{name:a,type:n,category:s,calculation_method:r,amount:i,conditions:o,description:c}=e.body;if(!a||!n||!s||!r||void 0===i)return t.status(400).json({success:!1,message:"Missing required fields"});let l={id:u.length+1,name:a,type:n,category:s,calculation_method:r,amount:i,conditions:o||{},description:c||"",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return u.push(l),t.status(201).json({success:!0,data:l,message:"Payroll rule created successfully"})}if("component"===a){let{name:a,type:n,amount:s,is_taxable:r}=e.body;if(!a||!n||void 0===s)return t.status(400).json({success:!1,message:"Missing required fields"});let i={id:o.length+1,name:a,type:n,amount:s,is_taxable:void 0===r||r,is_active:!0};return o.push(i),t.status(201).json({success:!0,data:i,message:"Salary component created successfully"})}return t.status(400).json({success:!1,message:"Invalid request type"})}async function p(e,t){let{type:a,id:n}=e.query;if("settings"===a){let{working_days_per_month:a,working_hours_per_day:n,overtime_multiplier:s,late_tolerance_minutes:r,early_leave_tolerance_minutes:i,minimum_working_hours:u,tax_percentage:o}=e.body;return Object.assign(c,{working_days_per_month:a||c.working_days_per_month,working_hours_per_day:n||c.working_hours_per_day,overtime_multiplier:s||c.overtime_multiplier,late_tolerance_minutes:r||c.late_tolerance_minutes,early_leave_tolerance_minutes:i||c.early_leave_tolerance_minutes,minimum_working_hours:u||c.minimum_working_hours,tax_percentage:o||c.tax_percentage,updated_at:new Date().toISOString()}),t.status(200).json({success:!0,data:c,message:"Payroll settings updated successfully"})}if("rule"===a){let a=parseInt(n),s=u.findIndex(e=>e.id===a);if(-1===s)return t.status(404).json({success:!1,message:"Payroll rule not found"});let r={...u[s],...e.body,updated_at:new Date().toISOString()};return u[s]=r,t.status(200).json({success:!0,data:r,message:"Payroll rule updated successfully"})}if("component"===a){let a=parseInt(n),s=o.findIndex(e=>e.id===a);if(-1===s)return t.status(404).json({success:!1,message:"Salary component not found"});let r={...o[s],...e.body};return o[s]=r,t.status(200).json({success:!0,data:r,message:"Salary component updated successfully"})}return t.status(400).json({success:!1,message:"Invalid request type"})}async function _(e,t){let{type:a,id:n}=e.query;if("rule"===a){let e=parseInt(n),a=u.findIndex(t=>t.id===e);if(-1===a)return t.status(404).json({success:!1,message:"Payroll rule not found"});let s=u.splice(a,1)[0];return t.status(200).json({success:!0,data:s,message:"Payroll rule deleted successfully"})}if("component"===a){let e=parseInt(n),a=o.findIndex(t=>t.id===e);if(-1===a)return t.status(404).json({success:!1,message:"Salary component not found"});let s=o.splice(a,1)[0];return t.status(200).json({success:!0,data:s,message:"Salary component deleted successfully"})}return t.status(400).json({success:!1,message:"Invalid request type"})}let y=(0,i.l)(n,"default"),g=(0,i.l)(n,"config"),f=new s.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/payroll/rules",pathname:"/api/payroll/rules",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=4522);module.exports=a})();