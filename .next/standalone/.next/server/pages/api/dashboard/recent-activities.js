"use strict";(()=>{var e={};e.id=8857,e.ids=[8857],e.modules={9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},5290:(e,t,a)=>{a.r(t),a.d(t,{config:()=>c,default:()=>m,routeModule:()=>h});var r={};a.r(r),a.d(r,{default:()=>d});var n=a(1802),s=a(7153),i=a(6249),o=a(3382);let u=e=>{let t=[],a=["masuk","keluar","terlambat","alpha"],r=["John Doe","Jane Smith","Bob Johnson","Alice Brown","Charlie Wilson","Diana Prince","Edward Norton","Fiona Green","George Lucas","Helen Troy"],n={masuk:["Masuk tepat waktu","Check-in berhasil","Hadir sesuai jadwal"],keluar:["Pulang tepat waktu","Check-out berhasil","Selesai jam kerja"],terlambat:["Terlambat 15 menit","Terlambat 30 menit","Terlambat karena macet","Terlambat 45 menit"],alpha:["Tidak hadir tanpa keterangan","Tidak ada konfirmasi","Absen tanpa izin"]},s=new Date;for(let i=0;i<e;i++){let e;let o=a[Math.floor(Math.random()*a.length)],u=r[Math.floor(Math.random()*r.length)],l=n[o],d=l[Math.floor(Math.random()*l.length)],m=Math.floor(288e5*Math.random()),c=new Date(s.getTime()-m);e="alpha"===o?"-":c.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),t.push({id:i+1,type:o,karyawan_nama:u,waktu:e,keterangan:d,created_at:c.toISOString()})}return t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())};async function l(e,t){if("GET"!==e.method)return t.status(405).json({success:!1,message:"Method not allowed"});try{let{limit:a="10"}=e.query,r=parseInt(a,10);if(isNaN(r)||r<1||r>50)return t.status(400).json({success:!1,message:"Invalid limit parameter. Must be a number between 1 and 50"});let n=u(r);return t.status(200).json({success:!0,message:"Recent activities retrieved successfully",data:n})}catch(e){return t.status(500).json({success:!1,message:"Internal server error",error:e.message})}}let d=(0,o.Q)(l),m=(0,i.l)(r,"default"),c=(0,i.l)(r,"config"),h=new n.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/dashboard/recent-activities",pathname:"/api/dashboard/recent-activities",bundlePath:"",filename:""},userland:r})},3382:(e,t,a)=>{a.d(t,{Q:()=>s,c:()=>i});var r=a(9344),n=a.n(r);function s(e,t){return async(a,r)=>{try{let s=a.headers.authorization;if(!s||!s.startsWith("Bearer "))return r.status(401).json({message:"No token provided"});let i=s.substring(7),o=n().verify(i,"your-super-secret-jwt-key-here-development");if(!o||!o.id)return r.status(401).json({message:"Invalid token"});if(a.user={id:o.id,userId:parseInt(o.id)||1,email:o.email||"",name:o.name||"",role:o.role||"admin"},t&&!(Array.isArray(t)?t:[t]).includes(a.user.role))return r.status(403).json({message:"Insufficient permissions"});return await e(a,r)}catch(e){return r.status(401).json({message:"Invalid token"})}}}function i(e){return s(e,"admin")}},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=5290);module.exports=a})();