"use strict";(()=>{var e={};e.id=6139,e.ids=[6139],e.modules={9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,a){return a in s?s[a]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,a)):"function"==typeof s&&"default"===a?s:void 0}}})},3846:(e,s,a)=>{a.r(s),a.d(s,{config:()=>l,default:()=>f,routeModule:()=>m});var t={};a.r(t),a.d(t,{default:()=>c});var n=a(1802),r=a(7153),i=a(6249),u=a(3382);let d=[{id:1,nama:"Manager",deskripsi:"Mengelola operasional dan tim",gaji_pokok:15e6,tunjangan:2e6,status:"aktif",created_at:"2023-01-01T00:00:00.000Z",updated_at:"2023-01-01T00:00:00.000Z"},{id:2,nama:"Staff",deskripsi:"Melaksanakan tugas operasional",gaji_pokok:8e6,tunjangan:1e6,status:"aktif",created_at:"2023-01-01T00:00:00.000Z",updated_at:"2023-01-01T00:00:00.000Z"},{id:3,nama:"Supervisor",deskripsi:"Mengawasi dan membimbing staff",gaji_pokok:12e6,tunjangan:15e5,status:"aktif",created_at:"2023-01-01T00:00:00.000Z",updated_at:"2023-01-01T00:00:00.000Z"},{id:4,nama:"Admin",deskripsi:"Mengelola administrasi dan sistem",gaji_pokok:1e7,tunjangan:12e5,status:"aktif",created_at:"2023-01-01T00:00:00.000Z",updated_at:"2023-01-01T00:00:00.000Z"}];async function o(e,s){try{let{id:a}=e.query,t=parseInt(a);if(isNaN(t))return s.status(400).json({success:!1,message:"Invalid jabatan ID"});switch(e.method){case"GET":let n=d.find(e=>e.id===t);if(!n)return s.status(404).json({success:!1,message:"Jabatan not found"});return s.status(200).json({success:!0,data:n});case"PUT":if(e.user?.role!=="admin")return s.status(403).json({success:!1,message:"Insufficient permissions"});let{nama:r,deskripsi:i,gaji_pokok:u,tunjangan:o}=e.body;if(!r||!i||void 0===u)return s.status(400).json({success:!1,message:"Required fields: nama, deskripsi, gaji_pokok"});let c=d.findIndex(e=>e.id===t);if(-1===c)return s.status(404).json({success:!1,message:"Jabatan not found"});if(d.find(e=>e.nama===r&&e.id!==t))return s.status(400).json({success:!1,message:"Jabatan name already exists"});let f={...d[c],nama:r,deskripsi:i,gaji_pokok:parseInt(u),tunjangan:o?parseInt(o):0,updated_at:new Date().toISOString()};return d[c]=f,s.status(200).json({success:!0,message:"Jabatan updated successfully",data:f});case"DELETE":if(e.user?.role!=="admin")return s.status(403).json({success:!1,message:"Insufficient permissions"});let l=d.findIndex(e=>e.id===t);if(-1===l)return s.status(404).json({success:!1,message:"Jabatan not found"});let m=d[l];return d.splice(l,1),s.status(200).json({success:!0,message:"Jabatan deleted successfully",data:m});default:return s.status(405).json({success:!1,message:"Method not allowed"})}}catch(e){return s.status(500).json({success:!1,message:"Internal server error"})}}let c=(0,u.Q)(o),f=(0,i.l)(t,"default"),l=(0,i.l)(t,"config"),m=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/jabatan/[id]",pathname:"/api/jabatan/[id]",bundlePath:"",filename:""},userland:t})},3382:(e,s,a)=>{a.d(s,{Q:()=>r,c:()=>i});var t=a(9344),n=a.n(t);function r(e,s){return async(a,t)=>{try{let r=a.headers.authorization;if(!r||!r.startsWith("Bearer "))return t.status(401).json({message:"No token provided"});let i=r.substring(7),u=n().verify(i,"afms-production-jwt-secret-key-2024-ultra-secure-random-string-xyz789");if(!u||!u.id)return t.status(401).json({message:"Token tidak valid"});if(a.user={id:u.id,userId:parseInt(u.id)||1,email:u.email||"",name:u.name||"",role:u.role||"admin"},s&&!(Array.isArray(s)?s:[s]).includes(a.user.role))return t.status(403).json({message:"Insufficient permissions"});return await e(a,t)}catch(e){return t.status(401).json({message:"Token tidak valid"})}}}function i(e){return r(e,"admin")}},7153:(e,s)=>{var a;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,s,a)=>{e.exports=a(145)}};var s=require("../../../webpack-api-runtime.js");s.C(e);var a=s(s.s=3846);module.exports=a})();