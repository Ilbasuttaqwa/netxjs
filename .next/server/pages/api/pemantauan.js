"use strict";(()=>{var a={};a.id=2991,a.ids=[2991],a.modules={9344:a=>{a.exports=require("jsonwebtoken")},145:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(a,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function a(t,e){return e in t?t[e]:"then"in t&&"function"==typeof t.then?t.then(t=>a(t,e)):"function"==typeof t&&"default"===e?t:void 0}}})},1297:(a,t,e)=>{e.r(t),e.d(t,{config:()=>l,default:()=>m,routeModule:()=>h});var n={};e.r(n),e.d(n,{default:()=>c});var r=e(1802),s=e(7153),i=e(6249),o=e(3382);let u={today_stats:{total_karyawan:25,hadir:20,terlambat:3,tidak_hadir:2,percentage_hadir:80},recent_activities:[{id:1,karyawan:{nama:"John Doe",email:"john@afms.com"},activity:"Clock In",time:"08:00:00",status:"hadir",lokasi:"Kantor Utama",timestamp:new Date().toISOString()},{id:2,karyawan:{nama:"Jane Smith",email:"jane@afms.com"},activity:"Clock In",time:"08:15:00",status:"terlambat",lokasi:"Kantor Utama",timestamp:new Date(Date.now()-9e5).toISOString()},{id:3,karyawan:{nama:"Bob Johnson",email:"bob@afms.com"},activity:"Clock Out",time:"17:00:00",status:"hadir",lokasi:"Kantor Utama",timestamp:new Date(Date.now()-18e5).toISOString()}],cabang_stats:[{cabang_id:1,nama_cabang:"Kantor Utama",total_karyawan:15,hadir:12,terlambat:2,tidak_hadir:1},{cabang_id:2,nama_cabang:"Cabang Jakarta",total_karyawan:10,hadir:8,terlambat:1,tidak_hadir:1}],hourly_attendance:[{hour:"07:00",count:2},{hour:"08:00",count:15},{hour:"09:00",count:5},{hour:"10:00",count:2},{hour:"11:00",count:1}]};async function d(a,t){try{if("GET"===a.method){let{type:e="dashboard"}=a.query;switch(e){case"dashboard":return t.status(200).json({success:!0,data:{today_stats:u.today_stats,recent_activities:u.recent_activities.slice(0,10),cabang_stats:u.cabang_stats}});case"realtime":return t.status(200).json({success:!0,data:{recent_activities:u.recent_activities,hourly_attendance:u.hourly_attendance,last_updated:new Date().toISOString()}});case"stats":return t.status(200).json({success:!0,data:u});default:return t.status(400).json({message:"Invalid type parameter. Use: dashboard, realtime, or stats"})}}return t.status(405).json({message:"Method not allowed"})}catch(a){return t.status(500).json({message:"Internal server error"})}}let c=(0,o.c)(d),m=(0,i.l)(n,"default"),l=(0,i.l)(n,"config"),h=new r.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/pemantauan",pathname:"/api/pemantauan",bundlePath:"",filename:""},userland:n})},3382:(a,t,e)=>{e.d(t,{Q:()=>s,c:()=>i});var n=e(9344),r=e.n(n);function s(a,t){return async(e,n)=>{try{let s=e.headers.authorization;if(!s||!s.startsWith("Bearer "))return n.status(401).json({message:"No token provided"});let i=s.substring(7),o=r().verify(i,"afms-production-jwt-secret-key-2024-ultra-secure-random-string-xyz789");if(!o||!o.id)return n.status(401).json({message:"Token tidak valid"});if(e.user={id:o.id,userId:parseInt(o.id)||1,email:o.email||"",name:o.name||"",role:o.role||"admin"},t&&!(Array.isArray(t)?t:[t]).includes(e.user.role))return n.status(403).json({message:"Insufficient permissions"});return await a(e,n)}catch(a){return n.status(401).json({message:"Token tidak valid"})}}}function i(a){return s(a,"admin")}},7153:(a,t)=>{var e;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return e}}),function(a){a.PAGES="PAGES",a.PAGES_API="PAGES_API",a.APP_PAGE="APP_PAGE",a.APP_ROUTE="APP_ROUTE"}(e||(e={}))},1802:(a,t,e)=>{a.exports=e(145)}};var t=require("../../webpack-api-runtime.js");t.C(a);var e=t(t.s=1297);module.exports=e})();