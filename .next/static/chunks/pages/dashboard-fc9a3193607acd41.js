(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(7014)}])},5720:function(e,a,t){"use strict";var s=t(5893);t(7294);var l=t(8660);a.Z=e=>{let{size:a="md",variant:t="spinner",color:r="primary",className:n,text:i}=e,c=()=>{switch(a){case"sm":return"w-4 h-4";case"md":default:return"w-6 h-6";case"lg":return"w-8 h-8";case"xl":return"w-12 h-12"}},o=()=>{switch(r){case"primary":default:return"text-primary-600";case"secondary":return"text-secondary-600";case"white":return"text-white";case"gray":return"text-gray-600"}},d=()=>(0,s.jsxs)("svg",{className:(0,l.cn)("animate-spin",c(),o(),n),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m=()=>(0,s.jsx)("div",{className:(0,l.cn)("flex space-x-1",n),children:[0,1,2].map(e=>(0,s.jsx)("div",{className:(0,l.cn)("rounded-full animate-pulse",c().replace("w-","w-").replace("h-","h-").split(" ").map(e=>e.startsWith("w-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e.startsWith("h-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e).join(" "),o().replace("text-","bg-")),style:{animationDelay:"".concat(.2*e,"s"),animationDuration:"1s"}},e))}),x=()=>(0,s.jsx)("div",{className:(0,l.cn)("rounded-full animate-pulse",c(),o().replace("text-","bg-"),n)}),u=()=>(0,s.jsx)("div",{className:(0,l.cn)("flex items-end space-x-1",n),children:[0,1,2,3].map(e=>(0,s.jsx)("div",{className:(0,l.cn)("animate-pulse","w-1",c().split(" ")[1],o().replace("text-","bg-")),style:{animationDelay:"".concat(.15*e,"s"),animationDuration:"0.8s",height:"".concat(20+e%2*10,"px")}},e))});return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(()=>{switch(t){case"spinner":default:return d();case"dots":return m();case"pulse":return x();case"bars":return u()}})(),i&&(0,s.jsx)("p",{className:(0,l.cn)("text-sm",o()),children:i})]})}},7014:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return k}});var s=t(5893),l=t(7294),r=t(9008),n=t.n(r),i=t(1163),c=t(6458),o=t(889),d=t(5770),m=t(5720);function x(e){let{children:a,requireAdmin:t=!1}=e,[r,n]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null),d=(0,i.useRouter)();return((0,l.useEffect)(()=>{let e=setTimeout(()=>{let e=localStorage.getItem("auth_token"),a=localStorage.getItem("auth_user");if(!e||!a){d.replace("/login");return}try{let e=JSON.parse(a);if(o(e),t&&"admin"!==e.role){d.replace("/dashboard");return}n(!1)}catch(e){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),d.replace("/login")}},100);return()=>clearTimeout(e)},[d,t]),r)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(m.Z,{})}):c?t&&"admin@afms.com"!==c.email?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,s.jsx)(s.Fragment,{children:a}):null}var u=t(8154),h=t(2964),g=t(5197),p=t(8482),j=t(5892),v=t(3146),y=t(1429),f=t(3431),w=t(9711),N=t(2044),b=t(68),_=t(7530);let Z=()=>{var e,a;let{user:t}=(0,d.a)(),r=(0,i.useRouter)(),{addToast:m}=(0,o.p)(),[x,Z]=(0,l.useState)(null),[k,S]=(0,l.useState)(!0);(0,l.useEffect)(()=>{t&&D()},[t]);let D=async()=>{try{S(!0);let e=await c.kx.getStats();if(e.success)Z(e.data);else throw Error(e.message)}catch(e){m({type:"error",title:"Error",message:e.message||"Gagal memuat statistik dashboard"})}finally{S(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Dashboard - AFMS"}),(0,s.jsx)("meta",{name:"description",content:"Dashboard AFMS"})]}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat datang, ",null==t?void 0:t.name,"!"]}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:[(null==t?void 0:t.role)==="admin"?"Administrator":null==t?void 0:null===(e=t.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null==t?void 0:null===(a=t.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(h.Z,{title:"Total Karyawan",value:(null==x?void 0:x.total_karyawan)||0,icon:(0,s.jsx)(j.Z,{className:"h-6 w-6"}),color:"primary",loading:k}),(0,s.jsx)(h.Z,{title:"Total Cabang",value:(null==x?void 0:x.total_cabang)||0,icon:(0,s.jsx)(v.Z,{className:"h-6 w-6"}),color:"secondary",loading:k}),(0,s.jsx)(h.Z,{title:"Hadir Hari Ini",value:(null==x?void 0:x.total_hadir_hari_ini)||0,icon:(0,s.jsx)(y.Z,{className:"h-6 w-6"}),color:"success",loading:k}),(0,s.jsx)(h.Z,{title:"Terlambat Hari Ini",value:(null==x?void 0:x.total_terlambat_hari_ini)||0,icon:(0,s.jsx)(f.Z,{className:"h-6 w-6"}),color:"warning",loading:k})]}),(null==t?void 0:t.role)==="admin"&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(h.Z,{title:"Alpha Hari Ini",value:(null==x?void 0:x.total_alpha_hari_ini)||0,icon:(0,s.jsx)(w.Z,{className:"h-6 w-6"}),color:"danger",loading:k}),(0,s.jsx)(h.Z,{title:"Persentase Kehadiran",value:"".concat((null==x?void 0:x.persentase_kehadiran)||0,"%"),icon:(0,s.jsx)(N.Z,{className:"h-6 w-6"}),color:"info",loading:k}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>r.push("/admin/monitoring"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 text-gray-600"}),"Monitoring Fingerprint"]}),(0,s.jsxs)("button",{onClick:()=>r.push("/admin/karyawan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 text-gray-600"}),"Kelola Karyawan"]}),(0,s.jsxs)("button",{onClick:()=>r.push("/admin/absensi"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4 text-gray-600"}),"Laporan Absensi"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)(p.Z,{})]})]})})]})};var k=()=>(0,s.jsx)(x,{children:(0,s.jsx)(Z,{})})}},function(e){e.O(0,[196,474,151,239,154,975,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);