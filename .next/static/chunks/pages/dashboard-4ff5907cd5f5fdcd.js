(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(7014)}])},5197:function(e,a,t){"use strict";var s=t(5893),l=t(7294),i=t(2044),n=t(5770);a.Z=()=>{let{user:e}=(0,n.a)(),[a,t]=(0,l.useState)([]),[r,d]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(async()=>{try{d(!0),t([{label:"Sen",value:85},{label:"Sel",value:92},{label:"Rab",value:78},{label:"Kam",value:88},{label:"Jum",value:95},{label:"Sab",value:82},{label:"Min",value:90}])}catch(e){}finally{d(!1)}})()},[e]),r)return(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Grafik Kehadiran"}),(0,s.jsx)(i.Z,{className:"h-6 w-6 text-gray-400"})]}),(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-64 bg-gray-200 rounded"})})]});let c=Math.max(...a.map(e=>e.value));return(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Grafik Kehadiran"}),(0,s.jsx)(i.Z,{className:"h-6 w-6 text-gray-400"})]}),(0,s.jsx)("div",{className:"space-y-4",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 text-sm font-medium text-gray-600",children:e.label}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:"".concat(e.value/c*100,"%")}})})}),(0,s.jsxs)("div",{className:"w-12 text-sm font-medium text-gray-900 text-right",children:[e.value,"%"]})]},a))}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,s.jsx)("span",{children:"Rata-rata minggu ini"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:[Math.round(a.reduce((e,a)=>e+a.value,0)/a.length),"%"]})]})})]})}},7014:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var s=t(5893),l=t(7294),i=t(9008),n=t.n(i),r=t(1163),d=t(6458),c=t(4607),o=t(5770),m=t(5720),u=e=>{let{children:a,requiredRole:t}=e,i=(0,o.a)(),n=i.user,d=i.isLoading,c=i.isAuthenticated,u=(0,r.useRouter)();return((0,l.useEffect)(()=>{if(!d){if(!c){u.replace("/login");return}if(t&&n&&!t.includes(n.role)){"admin"===n.role||"manager"===n.role?u.replace("/admin/dashboard"):u.replace("/dasbor");return}}},[n,d,c,u,t]),d||!c||t&&n&&!t.includes(n.role))?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(m.Z,{})}):(0,s.jsx)(s.Fragment,{children:a})},x=t(3903),h=t(2964),g=t(5197),v=t(8482),j=t(5892),f=t(3146),b=t(1429),w=t(3431),p=t(9711),y=t(2044),N=t(68),Z=t(7530);let k=()=>{var e,a;let{user:t}=(0,o.a)(),i=(0,r.useRouter)(),{addToast:m}=(0,c.p)(),[u,k]=(0,l.useState)(null),[_,E]=(0,l.useState)(!0);(0,l.useEffect)(()=>{t&&S()},[t]);let S=async()=>{try{E(!0);let e=await d.kx.getStats();if(e.success)k(e.data);else throw Error(e.message)}catch(e){m({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat statistik dashboard"})}finally{E(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Dashboard - AFMS"}),(0,s.jsx)("meta",{name:"description",content:"Dashboard AFMS"})]}),(0,s.jsx)(x.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat datang, ",null==t?void 0:t.nama_pegawai,"!"]}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:[(null==t?void 0:t.role)==="admin"?"Administrator":null==t?void 0:null===(e=t.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null==t?void 0:null===(a=t.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(h.Z,{title:"Total Karyawan",value:(null==u?void 0:u.total_karyawan)||0,icon:(0,s.jsx)(j.Z,{className:"h-6 w-6"}),color:"primary",loading:_}),(0,s.jsx)(h.Z,{title:"Total Cabang",value:(null==u?void 0:u.total_cabang)||0,icon:(0,s.jsx)(f.Z,{className:"h-6 w-6"}),color:"secondary",loading:_}),(0,s.jsx)(h.Z,{title:"Hadir Hari Ini",value:(null==u?void 0:u.total_hadir_hari_ini)||0,icon:(0,s.jsx)(b.Z,{className:"h-6 w-6"}),color:"success",loading:_}),(0,s.jsx)(h.Z,{title:"Terlambat Hari Ini",value:(null==u?void 0:u.total_terlambat_hari_ini)||0,icon:(0,s.jsx)(w.Z,{className:"h-6 w-6"}),color:"warning",loading:_})]}),(null==t?void 0:t.role)==="admin"&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(h.Z,{title:"Alpha Hari Ini",value:(null==u?void 0:u.total_alpha_hari_ini)||0,icon:(0,s.jsx)(p.Z,{className:"h-6 w-6"}),color:"danger",loading:_}),(0,s.jsx)(h.Z,{title:"Persentase Kehadiran",value:"".concat((null==u?void 0:u.persentase_kehadiran)||0,"%"),icon:(0,s.jsx)(y.Z,{className:"h-6 w-6"}),color:"info",loading:_}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>i.push("/admin/monitoring"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"h-4 w-4 text-gray-600"}),"Monitoring Fingerprint"]}),(0,s.jsxs)("button",{onClick:()=>i.push("/admin/karyawan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 text-gray-600"}),"Kelola Karyawan"]}),(0,s.jsxs)("button",{onClick:()=>i.push("/admin/absensi"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,s.jsx)(Z.Z,{className:"h-4 w-4 text-gray-600"}),"Laporan Absensi"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)(v.Z,{})]})]})})]})};var _=()=>(0,s.jsx)(u,{children:(0,s.jsx)(k,{})})},1429:function(e,a,t){"use strict";var s=t(7294);let l=s.forwardRef(function(e,a){let{title:t,titleId:l,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.Z=l},3431:function(e,a,t){"use strict";var s=t(7294);let l=s.forwardRef(function(e,a){let{title:t,titleId:l,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});a.Z=l},9711:function(e,a,t){"use strict";var s=t(7294);let l=s.forwardRef(function(e,a){let{title:t,titleId:l,...i}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},i),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.Z=l}},function(e){e.O(0,[474,795,903,466,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);