(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(7014)}])},5197:function(e,a,s){"use strict";var t=s(5893),l=s(7294),r=s(2044),n=s(5770);a.Z=()=>{let{user:e}=(0,n.a)(),[a,s]=(0,l.useState)([]),[i,d]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(async()=>{try{d(!0),s([{label:"Sen",value:85},{label:"Sel",value:92},{label:"Rab",value:78},{label:"Kam",value:88},{label:"Jum",value:95},{label:"Sab",value:82},{label:"Min",value:90}])}catch(e){}finally{d(!1)}})()},[e]),i)return(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Grafik Kehadiran"}),(0,t.jsx)(r.Z,{className:"h-6 w-6 text-gray-400"})]}),(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded"})})]});let o=Math.max(...a.map(e=>e.value));return(0,t.jsxs)("div",{className:"card-glass bg-white/80 backdrop-blur-sm border border-white/20 shadow-lg rounded-xl p-6 hover-lift transition-all duration-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-glow",children:(0,t.jsx)(r.Z,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Grafik Kehadiran"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Persentase kehadiran mingguan"})]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:a.map((e,a)=>{let s=e.value/o*100,l=e=>e>=90?"from-emerald-500 to-green-600":e>=75?"from-blue-500 to-indigo-600":e>=60?"from-yellow-500 to-orange-600":"from-red-500 to-pink-600";return(0,t.jsxs)("div",{className:"group",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-bold text-gray-700",children:e.label})}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Hari ",e.label]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[e.value,"%"]}),(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r ".concat(l(e.value))})]})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,t.jsx)("div",{className:"h-4 rounded-full bg-gradient-to-r ".concat(l(e.value)," transition-all duration-700 ease-out shadow-sm group-hover:shadow-md"),style:{width:"".concat(s,"%"),animation:"slideRight 0.8s ease-out ".concat(.1*a,"s both")}})})})]},a)})}),(0,t.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200/50",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Rata-rata minggu ini"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)("span",{className:"text-2xl font-bold text-gradient-blue",children:[Math.round(a.reduce((e,a)=>e+a.value,0)/a.length),"%"]})})]})})})]})}},7014:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var t=s(5893),l=s(7294),r=s(9008),n=s.n(r),i=s(1163),d=s(6458),o=s(4607),c=s(5770),m=s(5720),u=e=>{let{children:a,requiredRole:s}=e,r=(0,c.a)(),n=r.user,d=r.isLoading,o=r.isAuthenticated,u=(0,i.useRouter)();return((0,l.useEffect)(()=>{if(!d){if(!o){u.replace("/login");return}if(s&&n&&!s.includes(n.role)){"admin"===n.role||"manager"===n.role?u.replace("/admin/dashboard"):u.replace("/dasbor");return}}},[n,d,o,u,s]),d||!o||s&&n&&!s.includes(n.role))?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(m.Z,{})}):(0,t.jsx)(t.Fragment,{children:a})},x=s(3903),h=s(2964),g=s(5197),f=s(8482),v=s(5892),j=s(3146),b=s(1429),p=s(3431),w=s(9711),N=s(2044),y=s(68),k=s(7530);let Z=()=>{var e,a;let{user:s}=(0,c.a)(),r=(0,i.useRouter)(),{addToast:m}=(0,o.p)(),[u,Z]=(0,l.useState)(null),[_,E]=(0,l.useState)(!0);(0,l.useEffect)(()=>{s&&S()},[s]);let S=async()=>{try{E(!0);let e=await d.kx.getStats();if(e.success)Z(e.data);else throw Error(e.message)}catch(e){m({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat statistik dashboard"})}finally{E(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Dashboard - AFMS"}),(0,t.jsx)("meta",{name:"description",content:"Dashboard AFMS"})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat datang, ",null==s?void 0:s.nama_pegawai,"!"]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[(null==s?void 0:s.role)==="admin"?"Administrator":null==s?void 0:null===(e=s.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null==s?void 0:null===(a=s.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(h.Z,{title:"Total Karyawan",value:(null==u?void 0:u.total_karyawan)||0,icon:(0,t.jsx)(v.Z,{className:"h-6 w-6"}),color:"primary",loading:_}),(0,t.jsx)(h.Z,{title:"Total Cabang",value:(null==u?void 0:u.total_cabang)||0,icon:(0,t.jsx)(j.Z,{className:"h-6 w-6"}),color:"secondary",loading:_}),(0,t.jsx)(h.Z,{title:"Hadir Hari Ini",value:(null==u?void 0:u.total_hadir_hari_ini)||0,icon:(0,t.jsx)(b.Z,{className:"h-6 w-6"}),color:"success",loading:_}),(0,t.jsx)(h.Z,{title:"Terlambat Hari Ini",value:(null==u?void 0:u.total_terlambat_hari_ini)||0,icon:(0,t.jsx)(p.Z,{className:"h-6 w-6"}),color:"warning",loading:_})]}),(null==s?void 0:s.role)==="admin"&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(h.Z,{title:"Alpha Hari Ini",value:(null==u?void 0:u.total_alpha_hari_ini)||0,icon:(0,t.jsx)(w.Z,{className:"h-6 w-6"}),color:"danger",loading:_}),(0,t.jsx)(h.Z,{title:"Persentase Kehadiran",value:"".concat((null==u?void 0:u.persentase_kehadiran)||0,"%"),icon:(0,t.jsx)(N.Z,{className:"h-6 w-6"}),color:"info",loading:_}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>r.push("/admin/monitoring"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 text-gray-600"}),"Monitoring Fingerprint"]}),(0,t.jsxs)("button",{onClick:()=>r.push("/admin/karyawan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 text-gray-600"}),"Kelola Karyawan"]}),(0,t.jsxs)("button",{onClick:()=>r.push("/admin/absensi"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(k.Z,{className:"h-4 w-4 text-gray-600"}),"Laporan Absensi"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(g.Z,{}),(0,t.jsx)(f.Z,{})]})]})})]})};var _=()=>(0,t.jsx)(u,{children:(0,t.jsx)(Z,{})})},1429:function(e,a,s){"use strict";var t=s(7294);let l=t.forwardRef(function(e,a){let{title:s,titleId:l,...r}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},r),s?t.createElement("title",{id:l},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.Z=l},3431:function(e,a,s){"use strict";var t=s(7294);let l=t.forwardRef(function(e,a){let{title:s,titleId:l,...r}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},r),s?t.createElement("title",{id:l},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});a.Z=l},9711:function(e,a,s){"use strict";var t=s(7294);let l=t.forwardRef(function(e,a){let{title:s,titleId:l,...r}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":l},r),s?t.createElement("title",{id:l},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.Z=l}},function(e){e.O(0,[474,795,903,466,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);