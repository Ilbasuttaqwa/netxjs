(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{4142:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/attendance",function(){return t(7581)}])},451:function(e,a,t){"use strict";var s=t(7294);a.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialPageSize:a=10,initialPage:t=1,searchDebounceMs:r=300}=e,[n,l]=(0,s.useState)({data:[],loading:!1,pagination:{current:t,pageSize:a,total:0,totalPages:0},sort:null,search:"",error:null}),[i,c]=(0,s.useState)(null),d=(0,s.useCallback)(e=>{l(a=>({...a,data:e}))},[]),o=(0,s.useCallback)(e=>{l(a=>({...a,loading:e}))},[]),m=(0,s.useCallback)(e=>{l(a=>({...a,pagination:{...a.pagination,...e}}))},[]),x=(0,s.useCallback)(e=>{l(a=>({...a,sort:e}))},[]),u=(0,s.useCallback)(e=>{l(a=>({...a,search:e}))},[]),h=(0,s.useCallback)(e=>{l(a=>({...a,error:e}))},[]),g=(0,s.useCallback)((e,a)=>{l(t=>({...t,pagination:{...t.pagination,current:e,pageSize:a}}))},[]),p=(0,s.useCallback)(e=>{l(a=>({...a,sort:e,pagination:{...a.pagination,current:1}}))},[]),j=(0,s.useCallback)(e=>{i&&clearTimeout(i),c(setTimeout(()=>{l(a=>({...a,search:e,pagination:{...a.pagination,current:1}}))},r))},[i,r]),f=(0,s.useCallback)(()=>{l({data:[],loading:!1,pagination:{current:t,pageSize:a,total:0,totalPages:0},sort:null,search:"",error:null})},[t,a]);return(0,s.useEffect)(()=>()=>{i&&clearTimeout(i)},[i]),{state:n,actions:{setData:d,setLoading:o,setPagination:m,setSort:x,setSearch:u,setError:h,handlePaginationChange:g,handleSortChange:p,handleSearchChange:j,reset:f}}}},7581:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return k}});var s=t(5893),r=t(7294),n=t(9008),l=t.n(n),i=t(1163),c=t(1263),d=t(6162),o=t(9537);let m=r.forwardRef(function(e,a){let{title:t,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))});var x=t(3950),u=t(3903),h=t(3162),g=t(451),p=t(7245),j=t(4680),f=t(6639),b=t(8660),k=()=>{(0,i.useRouter)();let{state:e,actions:a}=(0,g.Z)({initialPageSize:15,searchDebounceMs:500}),[t,n]=(0,r.useState)({dateFrom:"",dateTo:"",status:""}),[k,N]=(0,r.useState)(!1),v=async()=>{a.setLoading(!0),a.setError(null);try{let s=new URLSearchParams({page:e.pagination.current.toString(),pageSize:e.pagination.pageSize.toString(),search:e.search,...e.sort&&{sortField:e.sort.field,sortOrder:e.sort.order},...t.dateFrom&&{dateFrom:t.dateFrom},...t.dateTo&&{dateTo:t.dateTo},...t.status&&{status:t.status}}),r=await fetch("/api/attendance?".concat(s)),n=await r.json();n.success?(a.setData(n.data),a.setPagination(n.pagination)):a.setError(n.message||"Gagal memuat data kehadiran")}catch(e){a.setError("Gagal memuat data kehadiran")}finally{a.setLoading(!1)}};(0,r.useEffect)(()=>{v()},[e.pagination.current,e.pagination.pageSize,e.search,e.sort,t]);let y=(t,s)=>{n(e=>({...e,[t]:s})),a.handlePaginationChange(1,e.pagination.pageSize)},w=e=>{let a={hadir:{bg:"bg-green-100",text:"text-green-800",label:"Hadir"},terlambat:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Terlambat"},tidak_hadir:{bg:"bg-red-100",text:"text-red-800",label:"Tidak Hadir"},izin:{bg:"bg-blue-100",text:"text-blue-800",label:"Izin"},sakit:{bg:"bg-purple-100",text:"text-purple-800",label:"Sakit"}}[e]||{bg:"bg-gray-100",text:"text-gray-800",label:e};return(0,s.jsx)("span",{className:(0,b.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.bg,a.text),children:a.label})},C=e=>e?e.substring(0,5):"-",S=(e,a)=>{if(!e||!a)return"-";let t=new Date("2000-01-01T".concat(e)),s=new Date("2000-01-01T".concat(a)).getTime()-t.getTime();return"".concat(Math.floor(s/36e5),"h ").concat(Math.floor(s%36e5/6e4),"m")};return(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"Catatan Kehadiran - AFMS"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Catatan Kehadiran"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Pantau kehadiran karyawan dan jam kerja"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(p.z,{variant:"outline",onClick:()=>N(!k),className:"flex items-center space-x-2",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Saring"})]}),(0,s.jsxs)(p.z,{variant:"outline",onClick:()=>{},className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Ekspor"})]})]})]}),k&&(0,s.jsx)(j.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dari Tanggal"}),(0,s.jsx)("input",{type:"date",value:t.dateFrom,onChange:e=>y("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sampai Tanggal"}),(0,s.jsx)("input",{type:"date",value:t.dateTo,onChange:e=>y("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,s.jsx)(f.P,{options:[{label:"Semua Status",value:""},{label:"Hadir",value:"hadir"},{label:"Terlambat",value:"terlambat"},{label:"Tidak Hadir",value:"tidak_hadir"},{label:"Izin",value:"izin"},{label:"Sakit",value:"sakit"}],value:t.status,onChange:e=>y("status",e),className:"w-full"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)(p.z,{variant:"outline",onClick:()=>{n({dateFrom:"",dateTo:"",status:""})},className:"w-full",children:"Hapus Filter"})})]})}),e.error&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("div",{className:"text-red-800",children:e.error})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)(j.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(x.Z,{className:"h-8 w-8 text-green-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Hadir Hari Ini"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),(0,s.jsx)(j.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(d.Z,{className:"h-8 w-8 text-yellow-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Terlambat Hari Ini"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),(0,s.jsx)(j.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(x.Z,{className:"h-8 w-8 text-red-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Tidak Hadir Hari Ini"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),(0,s.jsx)(j.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(c.Z,{className:"h-8 w-8 text-blue-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Catatan"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.pagination.total})]})]})})]}),(0,s.jsx)(h.Z,{columns:[{key:"user",title:"Karyawan",sortable:!0,render:(e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-medium",children:a.user.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.user.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:a.user.username})]})]})},{key:"tanggal",title:"Tanggal",dataIndex:"tanggal",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]})},{key:"jam_masuk",title:"Jam Masuk",dataIndex:"jam_masuk",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:(0,b.cn)("font-mono text-sm",e?"text-gray-900":"text-gray-400"),children:C(e)})]})},{key:"jam_keluar",title:"Jam Keluar",dataIndex:"jam_keluar",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:(0,b.cn)("font-mono text-sm",e?"text-gray-900":"text-gray-400"),children:C(e)})]})},{key:"working_hours",title:"Jam Kerja",render:(e,a)=>(0,s.jsx)("span",{className:"font-mono text-sm text-gray-900",children:S(a.jam_masuk,a.jam_keluar)})},{key:"status",title:"Status",dataIndex:"status",sortable:!0,render:e=>w(e)},{key:"keterangan",title:"Keterangan",dataIndex:"keterangan",render:e=>(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e||"-"})}],data:e.data,loading:e.loading,pagination:e.pagination,onPaginationChange:a.handlePaginationChange,onSortChange:a.handleSortChange,onSearch:a.handleSearchChange,searchable:!0,searchPlaceholder:"Cari berdasarkan nama karyawan atau username...",emptyText:"Tidak ada catatan kehadiran ditemukan",pageSizeOptions:[10,15,25,50]})]})]})}},1263:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});a.Z=r},9537:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});a.Z=r}},function(e){e.O(0,[474,795,903,162,888,774,179],function(){return e(e.s=4142)}),_N_E=e.O()}]);