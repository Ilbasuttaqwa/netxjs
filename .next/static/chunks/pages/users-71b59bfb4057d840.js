(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{4764:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t(5023)}])},3352:function(e,a,t){"use strict";var n=t(5893),s=t(7294),r=t(1594),i=t(8660);a.Z=e=>{let{isOpen:a,onClose:t,title:l,children:c,size:o="md",showCloseButton:d=!0,closeOnOverlayClick:u=!0,className:m}=e,g=(0,s.useRef)(null);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return a&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[a,t]),a)?(0,n.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto animate-fade-in",children:(0,n.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center",onClick:e=>{u&&e.target===e.currentTarget&&t()},children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"}),(0,n.jsxs)("div",{ref:g,className:(0,i.cn)("relative w-full transform overflow-hidden rounded-lg bg-white shadow-xl transition-all animate-scale-in",(()=>{switch(o){case"sm":return"max-w-md";case"md":default:return"max-w-lg";case"lg":return"max-w-2xl";case"xl":return"max-w-4xl";case"full":return"max-w-full mx-4"}})(),m),children:[(l||d)&&(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[l&&(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:l}),d&&(0,n.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",onClick:t,children:[(0,n.jsx)("span",{className:"sr-only",children:"Close"}),(0,n.jsx)(r.Z,{className:"h-6 w-6"})]})]}),(0,n.jsx)("div",{className:"px-6 py-4",children:c})]})]})}):null}},451:function(e,a,t){"use strict";var n=t(7294);a.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialPageSize:a=10,initialPage:t=1,searchDebounceMs:s=300}=e,[r,i]=(0,n.useState)({data:[],loading:!1,pagination:{current:t,pageSize:a,total:0,totalPages:0},sort:null,search:"",error:null}),[l,c]=(0,n.useState)(null),o=(0,n.useCallback)(e=>{i(a=>({...a,data:e}))},[]),d=(0,n.useCallback)(e=>{i(a=>({...a,loading:e}))},[]),u=(0,n.useCallback)(e=>{i(a=>({...a,pagination:{...a.pagination,...e}}))},[]),m=(0,n.useCallback)(e=>{i(a=>({...a,sort:e}))},[]),g=(0,n.useCallback)(e=>{i(a=>({...a,search:e}))},[]),x=(0,n.useCallback)(e=>{i(a=>({...a,error:e}))},[]),h=(0,n.useCallback)((e,a)=>{i(t=>({...t,pagination:{...t.pagination,current:e,pageSize:a}}))},[]),p=(0,n.useCallback)(e=>{i(a=>({...a,sort:e,pagination:{...a.pagination,current:1}}))},[]),f=(0,n.useCallback)(e=>{l&&clearTimeout(l),c(setTimeout(()=>{i(a=>({...a,search:e,pagination:{...a.pagination,current:1}}))},s))},[l,s]),b=(0,n.useCallback)(()=>{i({data:[],loading:!1,pagination:{current:t,pageSize:a,total:0,totalPages:0},sort:null,search:"",error:null})},[t,a]);return(0,n.useEffect)(()=>()=>{l&&clearTimeout(l)},[l]),{state:r,actions:{setData:o,setLoading:d,setPagination:u,setSort:m,setSearch:g,setError:x,handlePaginationChange:h,handleSortChange:p,handleSearchChange:f,reset:b}}}},5023:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var n=t(5893),s=t(7294),r=t(9008),i=t.n(r),l=t(1163);let c=s.forwardRef(function(e,a){let{title:t,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},r),t?s.createElement("title",{id:n},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});var o=t(1182),d=t(3903),u=t(3681),m=t(8154),g=t(2973),x=t(451),h=t(4410),p=t(3352),f=t(8660),b=t(889),j=()=>{let e=(0,l.useRouter)(),{addToast:a}=(0,b.p)(),{state:t,actions:r}=(0,x.Z)({initialPageSize:10,searchDebounceMs:500}),[j,v]=(0,s.useState)([]),[y,w]=(0,s.useState)(!1),[k,N]=(0,s.useState)(null),C=async()=>{r.setLoading(!0),r.setError(null);try{let e=new URLSearchParams({page:t.pagination.current.toString(),pageSize:t.pagination.pageSize.toString(),search:t.search,...t.sort&&{sortField:t.sort.field,sortOrder:t.sort.order}}),n=await fetch("/api/users?".concat(e)),s=await n.json();s.success?(r.setData(s.data),r.setPagination(s.pagination),(1===t.pagination.current||t.search)&&a({type:"success",title:"Data Berhasil Dimuat",message:"Ditemukan ".concat(s.data.length," pengguna")})):(r.setError(s.message||"Gagal memuat pengguna"),a({type:"error",title:"Gagal Memuat Data",message:s.message||"Gagal memuat pengguna"}))}catch(e){r.setError("Gagal memuat pengguna"),a({type:"error",title:"Kesalahan Jaringan",message:"Gagal terhubung ke server"})}finally{r.setLoading(!1)}};(0,s.useEffect)(()=>{C()},[t.pagination.current,t.pagination.pageSize,t.search,t.sort]);let E=async e=>{N(e),w(!0)},L=async()=>{if(k)try{(await fetch("/api/users/".concat(k.id),{method:"DELETE"})).ok?(C(),w(!1),N(null)):r.setError("Gagal menghapus pengguna")}catch(e){r.setError("Gagal menghapus pengguna")}},z=e=>(0,n.jsx)("span",{className:(0,f.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"),children:e}),S=e=>(0,n.jsx)("span",{className:(0,f.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{admin:"bg-purple-100 text-purple-800",moderator:"bg-blue-100 text-blue-800",user:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"),children:e}),P=[{key:"name",title:"Nama",dataIndex:"name",sortable:!0,render:(e,a)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,n.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-medium",children:e.charAt(0).toUpperCase()})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:a.email})]})]})},{key:"username",title:"Nama Pengguna",dataIndex:"username",sortable:!0},{key:"role",title:"Peran",dataIndex:"role",sortable:!0,render:e=>S(e)},{key:"status",title:"Status",dataIndex:"status",sortable:!0,render:e=>z(e)},{key:"created_at",title:"Dibuat Pada",dataIndex:"created_at",sortable:!0,render:e=>new Date(e).toLocaleDateString()},{key:"actions",title:"Aksi",align:"center",render:(a,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/users/".concat(t.id)),className:"text-blue-600 hover:text-blue-800",children:(0,n.jsx)(c,{className:"w-4 h-4"})}),(0,n.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/users/".concat(t.id,"/edit")),className:"text-green-600 hover:text-green-800",children:(0,n.jsx)(o.Z,{className:"w-4 h-4"})}),(0,n.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>E(t),className:"text-red-600 hover:text-red-800",children:(0,n.jsx)(d.Z,{className:"w-4 h-4"})})]})}];return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Manajemen Pengguna - AFMS"})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Pengguna"}),t.data.length>0&&(0,n.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.pagination.total," pengguna dimuat"]})]}),(0,n.jsx)("p",{className:"text-gray-600",children:"Kelola pengguna sistem dan izin mereka"})]}),(0,n.jsxs)(h.z,{onClick:()=>e.push("/users/create"),className:"flex items-center space-x-2",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Tambah Pengguna"})]})]}),t.error&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsx)("div",{className:"text-red-800",children:t.error})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(g.Z,{columns:P,data:t.data,loading:t.loading,pagination:t.pagination,onPaginationChange:r.handlePaginationChange,onSortChange:r.handleSortChange,onSearch:r.handleSearchChange,searchable:!0,searchPlaceholder:"Cari pengguna berdasarkan nama, email, atau username...",rowSelection:{selectedRowKeys:j,onChange:e=>v(e)},emptyText:"Tidak ada pengguna ditemukan"}),!t.loading&&t.data.length>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-md",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Data berhasil dimuat"]}),(0,n.jsxs)("span",{children:["Menampilkan ",t.data.length," dari ",t.pagination.total," pengguna"]})]}),(0,n.jsxs)("span",{children:["Terakhir diperbarui: ",new Date().toLocaleTimeString()]})]})]}),j.length>0&&(0,n.jsxs)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-lg border p-4 flex items-center space-x-4 z-50",children:[(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:[j.length," pengguna dipilih"]}),(0,n.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>{},className:"text-red-600 border-red-300 hover:bg-red-50",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Hapus Terpilih"]}),(0,n.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>v([]),children:"Batal"})]})]}),(0,n.jsx)(p.Z,{isOpen:y,onClose:()=>w(!1),title:"Hapus Pengguna",size:"md",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("p",{className:"text-gray-600",children:["Apakah Anda yakin ingin menghapus pengguna"," ",(0,n.jsx)("span",{className:"font-medium",children:null==k?void 0:k.name}),"? Tindakan ini tidak dapat dibatalkan."]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)(h.z,{variant:"outline",onClick:()=>w(!1),children:"Batal"}),(0,n.jsx)(h.z,{variant:"destructive",onClick:L,children:"Hapus"})]})]})})]})}},1182:function(e,a,t){"use strict";var n=t(7294);let s=n.forwardRef(function(e,a){let{title:t,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});a.Z=s},3681:function(e,a,t){"use strict";var n=t(7294);let s=n.forwardRef(function(e,a){let{title:t,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});a.Z=s},3903:function(e,a,t){"use strict";var n=t(7294);let s=n.forwardRef(function(e,a){let{title:t,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?n.createElement("title",{id:s},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});a.Z=s}},function(e){e.O(0,[474,20,154,973,888,774,179],function(){return e(e.s=4764)}),_N_E=e.O()}]);