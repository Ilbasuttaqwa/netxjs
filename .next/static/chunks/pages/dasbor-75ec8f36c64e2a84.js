(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{786:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dasbor",function(){return s(4088)}])},7375:function(e,a,s){"use strict";var t=s(5893),r=s(7294),l=s(6495),n=s(3148),i=s(6458),c=s(4607),d=s(5770);n.kL.register(n.uw,n.f$,n.od,n.jn,n.Dx,n.u,n.De),a.Z=()=>{let[e,a]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),[o,m]=(0,r.useState)("7days"),{addToast:u}=(0,c.p)(),{user:x,isAuthenticated:h}=(0,d.a)();(0,r.useEffect)(()=>{if(h&&x){let e=setTimeout(()=>{g()},100);return()=>clearTimeout(e)}},[o,h,x]);let g=async()=>{try{n(!0);let e=await i.kx.getAttendanceChart(o);if(e.success&&e.data)a(e.data);else throw Error(e.message)}catch(e){u({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat data chart"})}finally{n(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Grafik Kehadiran"}),(0,t.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,t.jsx)("option",{value:"7days",children:"7 Hari Terakhir"}),(0,t.jsx)("option",{value:"30days",children:"30 Hari Terakhir"}),(0,t.jsx)("option",{value:"3months",children:"3 Bulan Terakhir"})]})]}),(0,t.jsx)("div",{className:"h-80",children:s||!h?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"loading-spinner w-8 h-8"})}):(0,t.jsx)(l.x1,{data:e||{labels:["Sen","Sel","Rab","Kam","Jum","Sab","Min"],datasets:[{label:"Hadir",data:[65,59,80,81,56,55,40],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4},{label:"Terlambat",data:[28,48,40,19,86,27,90],borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",tension:.4},{label:"Alpha",data:[12,19,3,5,2,3,20],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1}},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,title:{display:!0,text:"Tanggal"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Jumlah"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},elements:{point:{radius:4,hoverRadius:6}}}})})]})}},5720:function(e,a,s){"use strict";var t=s(5893);s(7294);var r=s(8660);a.Z=e=>{let{size:a="md",variant:s="spinner",color:l="primary",className:n,text:i}=e,c=()=>{switch(a){case"sm":return"w-4 h-4";case"md":default:return"w-6 h-6";case"lg":return"w-8 h-8";case"xl":return"w-12 h-12"}},d=()=>{switch(l){case"primary":default:return"text-primary-600";case"secondary":return"text-secondary-600";case"white":return"text-white";case"gray":return"text-gray-600"}},o=()=>(0,t.jsxs)("svg",{className:(0,r.cn)("animate-spin",c(),d(),n),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m=()=>(0,t.jsx)("div",{className:(0,r.cn)("flex space-x-1",n),children:[0,1,2].map(e=>(0,t.jsx)("div",{className:(0,r.cn)("rounded-full animate-pulse",c().replace("w-","w-").replace("h-","h-").split(" ").map(e=>e.startsWith("w-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e.startsWith("h-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e).join(" "),d().replace("text-","bg-")),style:{animationDelay:"".concat(.2*e,"s"),animationDuration:"1s"}},e))}),u=()=>(0,t.jsx)("div",{className:(0,r.cn)("rounded-full animate-pulse",c(),d().replace("text-","bg-"),n)}),x=()=>(0,t.jsx)("div",{className:(0,r.cn)("flex items-end space-x-1",n),children:[0,1,2,3].map(e=>(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse","w-1",c().split(" ")[1],d().replace("text-","bg-")),style:{animationDelay:"".concat(.15*e,"s"),animationDuration:"0.8s",height:"".concat(20+e%2*10,"px")}},e))});return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(()=>{switch(s){case"spinner":default:return o();case"dots":return m();case"pulse":return u();case"bars":return x()}})(),i&&(0,t.jsx)("p",{className:(0,r.cn)("text-sm",d()),children:i})]})}},4680:function(e,a,s){"use strict";var t=s(5893);s(7294);var r=s(8660);let l=e=>{let{children:a,className:s,variant:l="default",padding:n="md",hover:i=!1,animate:c=!1}=e;return(0,t.jsx)("div",{className:(0,r.cn)("transition-all duration-300",(()=>{switch(l){case"glass":return"glass rounded-2xl shadow-xl";case"elevated":return"card-modern";case"outlined":return"bg-white/95 dark:bg-slate-800/95 border border-violet-200/50 dark:border-violet-700/50 hover:border-violet-300 dark:hover:border-violet-600 transition-all duration-300 backdrop-blur-md";default:return"card"}})(),(()=>{switch(n){case"none":return"";case"sm":return"p-4";case"md":default:return"p-6";case"lg":return"p-8"}})(),i&&"hover-lift cursor-pointer group",c&&"animate-fade-in",s),children:a})};l.Header=e=>{let{children:a,className:s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("card-header",s),children:a})},l.Body=e=>{let{children:a,className:s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("card-body",s),children:a})},l.Footer=e=>{let{children:a,className:s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("card-footer",s),children:a})},a.Z=l},4088:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return T}});var t=s(5893),r=s(7294),l=s(9008),n=s.n(l),i=s(1163),c=s(6458),d=s(4607),o=s(5770),m=s(5720);function u(e){let{children:a,requireAdmin:s=!1}=e,[l,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),o=(0,i.useRouter)();return((0,r.useEffect)(()=>{let e=setTimeout(()=>{let e=localStorage.getItem("auth_token"),a=localStorage.getItem("auth_user");if(!e||!a){o.replace("/login");return}try{let e=JSON.parse(a);if(d(e),s&&"admin"!==e.role){o.replace("/dasbor");return}n(!1)}catch(e){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),o.replace("/login")}},100);return()=>clearTimeout(e)},[o,s]),l)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(m.Z,{})}):c?s&&"admin@afms.com"!==c.email?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,t.jsx)(t.Fragment,{children:a}):null}var x=s(3903),h=s(8660),g=s(4680),p=e=>{let{title:a,value:s,icon:r,color:l,loading:n=!1,subtitle:i,trend:c}=e,d=()=>{switch(l){case"primary":return"bg-primary-50";case"secondary":return"bg-secondary-50";case"success":return"bg-success-50";case"warning":return"bg-warning-50";case"danger":return"bg-danger-50";case"info":return"bg-blue-50";default:return"bg-gray-50"}};return n?(0,t.jsx)(g.Z,{variant:"default",hover:!0,animate:!0,className:d(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),i&&(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded animate-pulse mt-2 w-3/4"})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"})]})}):(0,t.jsxs)(g.Z,{variant:"default",hover:!0,animate:!0,className:(0,h.cn)("relative overflow-hidden transition-all duration-200",d()),children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-black/10"})}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"number"==typeof s?s.toLocaleString():s}),i&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:i}),c&&(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsxs)("span",{className:(0,h.cn)("text-sm font-medium",c.isPositive?"text-success-600":"text-danger-600"),children:[c.isPositive?"+":"",c.value,"%"]}),(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"vs last period"})]})]}),(0,t.jsx)("div",{className:(0,h.cn)("flex items-center justify-center w-12 h-12 rounded-lg",(()=>{switch(l){case"primary":return"bg-primary-500 text-white";case"secondary":return"bg-secondary-500 text-white";case"success":return"bg-success-500 text-white";case"warning":return"bg-warning-500 text-white";case"danger":return"bg-danger-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})()),children:r})]})})]})},j=s(7375),v=s(1429),y=s(6162),b=s(3431),f=s(9711),w=()=>{let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),{addToast:n}=(0,d.p)(),{user:i,isAuthenticated:m}=(0,o.a)();(0,r.useEffect)(()=>{if(m&&i){let e=setTimeout(()=>{u()},100);return()=>clearTimeout(e)}},[m,i]);let u=async()=>{try{l(!0);let e=await c.kx.getRecentActivities(10);if(e.success&&e.data)a(e.data);else throw Error(e.message)}catch(e){a([])}finally{l(!1)}},x=e=>{switch(e){case"masuk":return(0,t.jsx)(v.Z,{className:"h-5 w-5 text-success-500"});case"keluar":return(0,t.jsx)(y.Z,{className:"h-5 w-5 text-primary-500"});case"terlambat":return(0,t.jsx)(b.Z,{className:"h-5 w-5 text-warning-500"});case"alpha":return(0,t.jsx)(f.Z,{className:"h-5 w-5 text-danger-500"});default:return(0,t.jsx)(y.Z,{className:"h-5 w-5 text-gray-500"})}},h=e=>{switch(e){case"masuk":return"text-success-600";case"keluar":return"text-primary-600";case"terlambat":return"text-warning-600";case"alpha":return"text-danger-600";default:return"text-gray-600"}},g=e=>{switch(e){case"masuk":return"Masuk";case"keluar":return"Keluar";case"terlambat":return"Terlambat";case"alpha":return"Alpha";default:return"Tidak Diketahui"}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Aktivitas Terbaru"}),(0,t.jsx)("button",{className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Lihat Semua"})]}),s||!m?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 animate-pulse",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]},a))}):(0,t.jsx)("div",{className:"space-y-4",children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(y.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Belum ada aktivitas hari ini"})]}):e.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:x(e.type)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.karyawan_nama}),(0,t.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 ".concat(h(e.type)),children:g(e.type)})]}),e.keterangan&&(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.keterangan})]}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.waktu})})]},e.id))})]})},N=s(5892),k=s(3146),_=s(2044),S=s(68),Z=s(7530);let C=()=>{var e,a;let{user:s}=(0,o.a)(),l=(0,i.useRouter)(),{addToast:m}=(0,d.p)(),[u,h]=(0,r.useState)(null),[g,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&C()},[s]);let C=async()=>{try{y(!0);let e=await c.kx.getStats();if(e.success)h(e.data);else throw Error(e.message)}catch(e){m({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat statistik dashboard"})}finally{y(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Dashboard - AFMS"}),(0,t.jsx)("meta",{name:"description",content:"Dashboard AFMS"})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat datang, ",null==s?void 0:s.nama_pegawai,"!"]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[(null==s?void 0:s.role)==="admin"?"Administrator":null==s?void 0:null===(e=s.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null==s?void 0:null===(a=s.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(p,{title:"Total Karyawan",value:(null==u?void 0:u.total_karyawan)||0,icon:(0,t.jsx)(N.Z,{className:"h-6 w-6"}),color:"primary",loading:g}),(0,t.jsx)(p,{title:"Total Cabang",value:(null==u?void 0:u.total_cabang)||0,icon:(0,t.jsx)(k.Z,{className:"h-6 w-6"}),color:"secondary",loading:g}),(0,t.jsx)(p,{title:"Hadir Hari Ini",value:(null==u?void 0:u.total_hadir_hari_ini)||0,icon:(0,t.jsx)(v.Z,{className:"h-6 w-6"}),color:"success",loading:g}),(0,t.jsx)(p,{title:"Terlambat Hari Ini",value:(null==u?void 0:u.total_terlambat_hari_ini)||0,icon:(0,t.jsx)(b.Z,{className:"h-6 w-6"}),color:"warning",loading:g})]}),(null==s?void 0:s.role)==="admin"&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(p,{title:"Alpha Hari Ini",value:(null==u?void 0:u.total_alpha_hari_ini)||0,icon:(0,t.jsx)(f.Z,{className:"h-6 w-6"}),color:"danger",loading:g}),(0,t.jsx)(p,{title:"Persentase Kehadiran",value:"".concat((null==u?void 0:u.persentase_kehadiran)||0,"%"),icon:(0,t.jsx)(_.Z,{className:"h-6 w-6"}),color:"info",loading:g}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>l.push("/admin/pemantauan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4 text-gray-600"}),"Monitoring Fingerprint"]}),(0,t.jsxs)("button",{onClick:()=>l.push("/admin/karyawan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 text-gray-600"}),"Kelola Karyawan"]}),(0,t.jsxs)("button",{onClick:()=>l.push("/admin/absensi"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 text-gray-600"}),"Laporan Absensi"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(j.Z,{}),(0,t.jsx)(w,{})]})]})})]})};var T=()=>(0,t.jsx)(u,{children:(0,t.jsx)(C,{})})}},function(e){e.O(0,[196,474,795,32,903,888,774,179],function(){return e(e.s=786)}),_N_E=e.O()}]);