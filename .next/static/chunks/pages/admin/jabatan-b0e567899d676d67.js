(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{1989:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/jabatan",function(){return s(3772)}])},5811:function(e,a,s){"use strict";s.d(a,{I:function(){return n}});var t=s(5893),l=s(7294),i=s(8660);let n=(0,l.forwardRef)((e,a)=>{let{className:s,type:l,label:n,error:r,helperText:d,leftIcon:c,rightIcon:m,id:x,...o}=e,h=x||"input-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[n&&(0,t.jsx)("label",{htmlFor:h,className:"form-label",children:n}),(0,t.jsxs)("div",{className:"relative",children:[c&&(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:c})}),(0,t.jsx)("input",{type:l,id:h,className:(0,i.cn)("form-input",c&&"pl-10",m&&"pr-10",r&&"border-danger-300 focus:border-danger-500 focus:ring-danger-500",s),ref:a,...o}),m&&(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:m})})]}),r&&(0,t.jsx)("p",{className:"form-error",children:r}),d&&!r&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d})]})});n.displayName="Input"},3772:function(e,a,s){"use strict";s.r(a);var t=s(5893),l=s(7294),i=s(9008),n=s.n(i),r=s(5770),d=s(1163),c=s(6458),m=s(889),x=s(8154),o=s(4410),h=s(5811),u=s(3681),p=s(3069),j=s(1990),b=s(1182),f=s(3903),g=s(1594);a.default=()=>{let{user:e,isAuthenticated:a,isLoading:s}=(0,r.a)(),i=(0,d.useRouter)(),{addToast:y}=(0,m.p)(),[N,v]=(0,l.useState)([]),[k,w]=(0,l.useState)(!0),[_,S]=(0,l.useState)(""),[C,J]=(0,l.useState)(1),[z,M]=(0,l.useState)(1),[E,Z]=(0,l.useState)(!1),[A,I]=(0,l.useState)(null),[G,P]=(0,l.useState)({nama:"",deskripsi:"",gaji_pokok:0});(0,l.useEffect)(()=>{if(!s&&!a){i.push("/login");return}if(e&&"admin"!==e.role){i.push("/dashboard");return}a&&T()},[a,s,e,i]);let T=async()=>{try{var e,a;w(!0);let s=await c.jU.getJabatan({page:C,per_page:15,search:_}),t=Array.isArray(s.data)?s.data:(null===(e=s.data)||void 0===e?void 0:e.data)||[];v(t),M(Math.ceil(((null===(a=s.data)||void 0===a?void 0:a.total)||0)/15))}catch(e){y({type:"error",title:"Error",message:"Gagal memuat data jabatan"})}finally{w(!1)}};(0,l.useEffect)(()=>{a&&T()},[C,_]);let U=async e=>{e.preventDefault();try{A?(await c.jU.updateJabatan(A,G),y({type:"success",title:"Berhasil",message:"Jabatan berhasil diperbarui"})):(await c.jU.createJabatan(G),y({type:"success",title:"Berhasil",message:"Jabatan berhasil ditambahkan"})),Z(!1),I(null),R(),T()}catch(e){y({type:"error",title:"Error",message:"Gagal menyimpan jabatan"})}},B=e=>{I(e.id),P({nama:e.nama_jabatan,deskripsi:e.deskripsi||"",gaji_pokok:e.gaji_pokok||0}),Z(!0)},D=async e=>{if(confirm("Apakah Anda yakin ingin menghapus jabatan ini?"))try{await c.jU.deleteJabatan(e),y({type:"success",title:"Berhasil",message:"Jabatan berhasil dihapus"}),T()}catch(e){y({type:"error",title:"Error",message:"Gagal menghapus jabatan"})}},R=()=>{P({nama:"",deskripsi:"",gaji_pokok:0})},F=()=>{Z(!1),I(null),R()};return s?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a&&(null==e?void 0:e.role)==="admin"?(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"Manajemen Jabatan - AFMS"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Jabatan"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Kelola data jabatan perusahaan"})]}),(0,t.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,t.jsxs)(o.z,{onClick:()=>Z(!0),className:"inline-flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Tambah Jabatan"]})})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(h.I,{type:"text",placeholder:"Cari jabatan...",value:_,onChange:e=>S(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Jabatan"]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deskripsi"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gaji Pokok"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})})}):0===N.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Tidak ada data jabatan"})}):N.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nama_jabatan})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.deskripsi||"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:["Rp ",(e.gaji_pokok||0).toLocaleString("id-ID")]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>B(e),children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>D(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),z>1&&(0,t.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,t.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,t.jsx)(o.z,{variant:"outline",onClick:()=>J(Math.max(1,C-1)),disabled:1===C,children:"Sebelumnya"}),(0,t.jsx)(o.z,{variant:"outline",onClick:()=>J(Math.min(z,C+1)),disabled:C===z,children:"Selanjutnya"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Halaman ",(0,t.jsx)("span",{className:"font-medium",children:C})," dari"," ",(0,t.jsx)("span",{className:"font-medium",children:z})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,t.jsx)(o.z,{variant:"outline",onClick:()=>J(Math.max(1,C-1)),disabled:1===C,className:"rounded-l-md",children:"Sebelumnya"}),(0,t.jsx)(o.z,{variant:"outline",onClick:()=>J(Math.min(z,C+1)),disabled:C===z,className:"rounded-r-md",children:"Selanjutnya"})]})})]})]})]})]}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,t.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:A?"Ubah Jabatan":"Tambah Jabatan"}),(0,t.jsx)("button",{onClick:F,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(g.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Jabatan"}),(0,t.jsx)(h.I,{type:"text",value:G.nama,onChange:e=>P({...G,nama:e.target.value}),required:!0,placeholder:"Masukkan nama jabatan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi"}),(0,t.jsx)("textarea",{value:G.deskripsi,onChange:e=>P({...G,deskripsi:e.target.value}),placeholder:"Masukkan deskripsi jabatan",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gaji Pokok"}),(0,t.jsx)(h.I,{type:"number",value:G.gaji_pokok,onChange:e=>P({...G,gaji_pokok:Number(e.target.value)}),placeholder:"Masukkan gaji pokok",min:"0"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:F,children:"Batal"}),(0,t.jsx)(o.z,{type:"submit",children:A?"Perbarui":"Simpan"})]})]})]})})]}):null}}},function(e){e.O(0,[474,978,154,888,774,179],function(){return e(e.s=1989)}),_N_E=e.O()}]);