(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{6841:function(a,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/karyawan",function(){return t(6988)}])},5811:function(a,e,t){"use strict";t.d(e,{I:function(){return i}});var s=t(5893),r=t(7294),n=t(8660);let i=(0,r.forwardRef)((a,e)=>{let{className:t,type:r,label:i,error:l,helperText:d,leftIcon:c,rightIcon:m,id:x,...o}=a,u=x||"input-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"w-full",children:[i&&(0,s.jsx)("label",{htmlFor:u,className:"form-label",children:i}),(0,s.jsxs)("div",{className:"relative",children:[c&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:c})}),(0,s.jsx)("input",{type:r,id:u,className:(0,n.cn)("form-input",c&&"pl-10",m&&"pr-10",l&&"border-danger-300 focus:border-danger-500 focus:ring-danger-500",t),ref:e,...o}),m&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:m})})]}),l&&(0,s.jsx)("p",{className:"form-error",children:l}),d&&!l&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d})]})});i.displayName="Input"},6988:function(a,e,t){"use strict";t.r(e);var s=t(5893),r=t(7294),n=t(9008),i=t.n(n),l=t(5770),d=t(1163),c=t(6458),m=t(889),x=t(8154),o=t(4410),u=t(5811),h=t(3681),p=t(3069),g=t(3950),j=t(3146),y=t(1990),b=t(1182),f=t(3903),w=t(1594);e.default=()=>{let{user:a,isAuthenticated:e,isLoading:t}=(0,l.a)(),n=(0,d.useRouter)(),{addToast:v}=(0,m.p)(),[N,k]=(0,r.useState)([]),[_,S]=(0,r.useState)([]),[C,K]=(0,r.useState)([]),[I,E]=(0,r.useState)(!0),[J,z]=(0,r.useState)(""),[A,P]=(0,r.useState)(1),[T,M]=(0,r.useState)(1),[Z,q]=(0,r.useState)(!1),[D,F]=(0,r.useState)(null),[B,G]=(0,r.useState)({nama:"",email:"",telepon:"",alamat:"",cabang_id:"",jabatan_id:"",finger_id:"",status:"aktif"}),[H,O]=(0,r.useState)({}),[R,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||e?!t&&e&&(null==a?void 0:a.role)!=="admin"&&n.push("/dashboard"):n.push("/login")},[e,t,a,n]),(0,r.useEffect)(()=>{e&&(null==a?void 0:a.role)==="admin"&&X()},[e,a,A,J]);let X=async()=>{try{E(!0);let[a,e,t]=await Promise.all([c.T5.getKaryawan({page:A,search:J}),c.DD.getCabang(),c.jU.getJabatan()]);if(a.success&&a.data?(k(a.data.data||[]),M(a.data.last_page||1)):k([{id:1,nama:"John Doe",email:"john@example.com",telepon:"081234567890",alamat:"Jl. Sudirman No. 123",jenis_kelamin:"L",cabang_id:1,jabatan_id:1,tanggal_masuk:"2024-01-01",fingerprint_id:"FP001",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00",cabang:{id:1,nama_cabang:"Kantor Pusat",alamat:"Jakarta",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"},jabatan:{id:1,nama_jabatan:"Manager",gaji_pokok:5e6,created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"}},{id:2,nama:"Jane Smith",email:"jane@example.com",telepon:"081234567891",alamat:"Jl. Thamrin No. 456",jenis_kelamin:"P",cabang_id:2,jabatan_id:2,tanggal_masuk:"2024-01-01",fingerprint_id:"FP002",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00",cabang:{id:2,nama_cabang:"Cabang Jakarta",alamat:"Jakarta Selatan",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"},jabatan:{id:2,nama_jabatan:"Staff",gaji_pokok:3e6,created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"}}]),e.success&&e.data){let a=Array.isArray(e.data)?e.data:e.data.data;S(a)}else S([{id:1,nama_cabang:"Kantor Pusat",alamat:"Jakarta",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"},{id:2,nama_cabang:"Cabang Jakarta",alamat:"Jakarta Selatan",status:"aktif",created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"}]);if(t.success&&t.data){let a=Array.isArray(t.data)?t.data:t.data.data;K(a)}else K([{id:1,nama_jabatan:"Manager",gaji_pokok:5e6,created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"},{id:2,nama_jabatan:"Staff",gaji_pokok:3e6,created_at:"2024-01-01 00:00:00",updated_at:"2024-01-01 00:00:00"}])}catch(a){v({type:"error",title:"Error",message:a.message||"Gagal memuat data"})}finally{E(!1)}},L=async a=>{a.preventDefault(),O({}),U(!0);try{let a={...B,cabang_id:parseInt(B.cabang_id),jabatan_id:parseInt(B.jabatan_id)},e=D?await c.T5.updateKaryawan(D,a):await c.T5.createKaryawan(a);if(e.success)v({type:"success",title:"Berhasil",message:D?"Karyawan berhasil diperbarui":"Karyawan berhasil ditambahkan"}),q(!1),W(),X();else if(e.errors)O(e.errors);else throw Error(e.message)}catch(a){v({type:"error",title:"Error",message:a.message||"Gagal menyimpan data"})}finally{U(!1)}},Q=a=>{F(a.id),G({nama:a.nama,email:a.email,telepon:a.telepon||"",alamat:a.alamat||"",cabang_id:a.cabang_id.toString(),jabatan_id:a.jabatan_id.toString(),finger_id:a.fingerprint_id||"",status:a.status}),q(!0)},V=async a=>{if(confirm("Apakah Anda yakin ingin menghapus karyawan ini?"))try{let e=await c.T5.deleteKaryawan(a);if(e.success)v({type:"success",title:"Berhasil",message:"Karyawan berhasil dihapus"}),X();else throw Error(e.message)}catch(a){v({type:"error",title:"Error",message:a.message||"Gagal menghapus karyawan"})}},W=()=>{G({nama:"",email:"",telepon:"",alamat:"",cabang_id:"",jabatan_id:"",finger_id:"",status:"aktif"}),O({}),F(null)},Y=()=>{q(!1),W()},$=a=>"aktif"===a?(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Aktif"}):(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-danger-100 text-danger-800",children:"Tidak Aktif"});return t||!e||(null==a?void 0:a.role)!=="admin"?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner w-8 h-8"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Manajemen Karyawan - AFMS"}),(0,s.jsx)("meta",{name:"description",content:"Kelola data karyawan"})]}),(0,s.jsxs)(x.Z,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Karyawan"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola data karyawan perusahaan"})]}),(0,s.jsx)(o.z,{onClick:()=>q(!0),leftIcon:(0,s.jsx)(h.Z,{className:"h-4 w-4"}),children:"Tambah Karyawan"})]})}),(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsx)("div",{className:"max-w-md",children:(0,s.jsx)(u.I,{type:"text",placeholder:"Cari karyawan...",value:J,onChange:a=>z(a.target.value),leftIcon:(0,s.jsx)(p.Z,{className:"h-4 w-4"})})})}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontak"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cabang"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I?[void 0,void 0,void 0,void 0,void 0].map((a,e)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-20"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-16"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-6 bg-gray-200 rounded w-12"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse flex space-x-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"})]})})]},e)):0===N.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Tidak ada data karyawan"})}):N.map(a=>{var e,t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(g.Z,{className:"h-5 w-5 text-primary-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.nama}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",a.fingerprint_id||"-"]})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:a.email}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:a.telepon})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-900",children:(null===(e=a.cabang)||void 0===e?void 0:e.nama_cabang)||"-"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-900",children:(null===(t=a.jabatan)||void 0===t?void 0:t.nama_jabatan)||"-"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:$(a.status)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>Q(a),leftIcon:(0,s.jsx)(b.Z,{className:"h-4 w-4"}),children:"Ubah"}),(0,s.jsx)(o.z,{variant:"destructive",size:"sm",onClick:()=>V(a.id),leftIcon:(0,s.jsx)(f.Z,{className:"h-4 w-4"}),children:"Hapus"})]})})]},a.id)})})]})}),T>1&&(0,s.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>P(Math.max(1,A-1)),disabled:1===A,children:"Sebelumnya"}),(0,s.jsx)(o.z,{variant:"outline",onClick:()=>P(Math.min(T,A+1)),disabled:A===T,children:"Selanjutnya"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Halaman ",(0,s.jsx)("span",{className:"font-medium",children:A})," dari"," ",(0,s.jsx)("span",{className:"font-medium",children:T})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>P(Math.max(1,A-1)),disabled:1===A,children:"Sebelumnya"}),(0,s.jsx)(o.z,{variant:"outline",onClick:()=>P(Math.min(T,A+1)),disabled:A===T,children:"Selanjutnya"})]})})]})]})]})]}),Z&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-gray-900 dark:bg-opacity-75 overflow-y-auto h-full w-full z-50",children:(0,s.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800 dark:border-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:D?"Edit Karyawan":"Tambah Karyawan"}),(0,s.jsx)("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100",children:(0,s.jsx)(w.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,s.jsx)(u.I,{label:"Nama",type:"text",value:B.nama,onChange:a=>G({...B,nama:a.target.value}),error:H.nama,required:!0}),(0,s.jsx)(u.I,{label:"Email",type:"email",value:B.email,onChange:a=>G({...B,email:a.target.value}),error:H.email,required:!0}),(0,s.jsx)(u.I,{label:"No. HP",type:"text",value:B.telepon,onChange:a=>G({...B,telepon:a.target.value}),error:H.telepon,required:!0}),(0,s.jsx)(u.I,{label:"Alamat",type:"text",value:B.alamat,onChange:a=>G({...B,alamat:a.target.value}),error:H.alamat,required:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cabang"}),(0,s.jsxs)("select",{value:B.cabang_id,onChange:a=>G({...B,cabang_id:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih Cabang"}),_.map(a=>(0,s.jsx)("option",{value:a.id,children:a.nama_cabang},a.id))]}),H.cabang_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:H.cabang_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jabatan"}),(0,s.jsxs)("select",{value:B.jabatan_id,onChange:a=>G({...B,jabatan_id:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih Jabatan"}),C.map(a=>(0,s.jsx)("option",{value:a.id,children:a.nama_jabatan},a.id))]}),H.jabatan_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:H.jabatan_id})]}),(0,s.jsx)(u.I,{label:"Finger ID (Opsional)",type:"text",value:B.finger_id,onChange:a=>G({...B,finger_id:a.target.value}),error:H.finger_id}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:B.status,onChange:a=>G({...B,status:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"aktif",children:"Aktif"}),(0,s.jsx)("option",{value:"tidak_aktif",children:"Tidak Aktif"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(o.z,{type:"button",variant:"outline",onClick:Y,children:"Batal"}),(0,s.jsx)(o.z,{type:"submit",loading:R,children:D?"Perbarui":"Simpan"})]})]})]})})]})]})}}},function(a){a.O(0,[474,597,154,888,774,179],function(){return a(a.s=6841)}),_N_E=a.O()}]);