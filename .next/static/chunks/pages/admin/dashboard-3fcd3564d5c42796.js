(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(4991)}])},4991:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return f}});var t=s(5893),n=s(7294),l=s(1163),i=s(8154),r=s(5770),c=s(2964),o=s(8482),d=s(5197),m=s(5892),u=s(3146),x=s(1429),g=s(3431),h=s(9711),p=s(2044),j=s(68),b=s(7530);function f(){var e,a;let{user:s,isLoading:f}=(0,r.a)(),N=(0,l.useRouter)(),[y,w]=(0,n.useState)({totalEmployees:0,totalBranches:0,todayAttendance:0,lateToday:0,absentToday:0,attendancePercentage:0}),[v,Z]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!f&&(!s||!["admin","manager"].includes(s.role))){N.push("/login");return}s&&_()},[s,f,N]);let _=async()=>{try{let e=await fetch("/api/dashboard/stats");if(e.ok){let a=await e.json();w(a)}}catch(e){w({totalEmployees:150,totalBranches:5,todayAttendance:142,lateToday:8,absentToday:8,attendancePercentage:94.7})}finally{Z(!1)}};if(f||v)return(0,t.jsx)(i.Z,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})});if(!s||!["admin","manager"].includes(s.role))return null;let T=new Date,k=T.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),S=T.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return(0,t.jsx)(i.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Admin"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Selamat datang, ",s.name," (",s.role,")"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[null===(e=s.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null===(a=s.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:S}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:k})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(c.Z,{title:"Total Karyawan",value:y.totalEmployees.toString(),icon:(0,t.jsx)(m.Z,{className:"h-6 w-6"}),color:"info"}),(0,t.jsx)(c.Z,{title:"Total Cabang",value:y.totalBranches.toString(),icon:(0,t.jsx)(u.Z,{className:"h-6 w-6"}),color:"success"}),(0,t.jsx)(c.Z,{title:"Hadir Hari Ini",value:y.todayAttendance.toString(),icon:(0,t.jsx)(x.Z,{className:"h-6 w-6"}),color:"primary"}),(0,t.jsx)(c.Z,{title:"Terlambat Hari Ini",value:y.lateToday.toString(),icon:(0,t.jsx)(g.Z,{className:"h-6 w-6"}),color:"warning"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(c.Z,{title:"Alpha Hari Ini",value:y.absentToday.toString(),icon:(0,t.jsx)(h.Z,{className:"h-6 w-6"}),color:"danger"}),(0,t.jsx)(c.Z,{title:"Persentase Kehadiran",value:"".concat(y.attendancePercentage,"%"),icon:(0,t.jsx)(p.Z,{className:"h-6 w-6"}),color:"success"}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>N.push("/admin/monitoring"),className:"w-full text-left px-4 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center gap-3",children:[(0,t.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"Monitoring Fingerprint"})]}),(0,t.jsxs)("button",{onClick:()=>N.push("/admin/karyawan"),className:"w-full text-left px-4 py-2 bg-green-50 hover:bg-green-100 rounded-lg transition-colors flex items-center gap-3",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{className:"text-green-700 font-medium",children:"Kelola Karyawan"})]}),(0,t.jsxs)("button",{onClick:()=>N.push("/admin/absensi"),className:"w-full text-left px-4 py-2 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors flex items-center gap-3",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsx)("span",{className:"text-purple-700 font-medium",children:"Laporan Absensi"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)(o.Z,{})]})]})})}}},function(e){e.O(0,[196,474,151,239,154,975,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);