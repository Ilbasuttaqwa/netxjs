(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{6841:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/karyawan",function(){return t(8344)}])},1774:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var s=t(5893),r=t(7294),n=t(8660);let l=(0,r.forwardRef)((e,a)=>{let{className:t,type:r,label:l,error:i,helperText:d,leftIcon:c,rightIcon:o,id:m,...x}=e,u=m||"input-".concat(Math.random().toString(36).substr(2,9));return(0,s.jsxs)("div",{className:"w-full",children:[l&&(0,s.jsx)("label",{htmlFor:u,className:"form-label",children:l}),(0,s.jsxs)("div",{className:"relative",children:[c&&(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:c})}),(0,s.jsx)("input",{type:r,id:u,className:(0,n.cn)("form-input-modern",c&&"pl-12",o&&"pr-12",i&&"border-red-400 focus:border-red-500 focus:ring-red-500 shadow-glow-rose","focus:shadow-glow transition-all duration-300",t),ref:a,...x}),o&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:o})})]}),i&&(0,s.jsx)("p",{className:"form-error",children:i}),d&&!i&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d})]})});l.displayName="Input"},8344:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var s=t(5893),r=t(7294),n=t(9008),l=t.n(n),i=t(5770),d=t(1163),c=t(6458),o=t(4607),m=t(3903),x=t(7245),u=t(1774),h=t(3681),g=t(3069),p=t(3950),y=t(3146),j=t(1990);let f=r.forwardRef(function(e,a){let{title:t,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},n),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))});var b=t(1182),w=t(4991),v=t(1594),N=()=>{let{user:e,isAuthenticated:a,isLoading:t}=(0,i.a)(),n=(0,d.useRouter)(),{addToast:N}=(0,o.p)(),[k,_]=(0,r.useState)([]),[C,E]=(0,r.useState)([]),[S,Z]=(0,r.useState)([]),[K,L]=(0,r.useState)(!0),[A,I]=(0,r.useState)(""),[M,T]=(0,r.useState)(1),[z,B]=(0,r.useState)(1),[O,P]=(0,r.useState)(!1),[R,q]=(0,r.useState)(null),[D,W]=(0,r.useState)(null),[F,H]=(0,r.useState)({nama:"",telepon:"",alamat:"",cabang_id:"",jabatan_id:"",finger_id:"",status:"aktif"}),[J,G]=(0,r.useState)({}),[U,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||a?!t&&a&&(null==e?void 0:e.role)!=="admin"&&n.push("/dasbor"):n.push("/login")},[a,t,e,n]),(0,r.useEffect)(()=>{a&&(null==e?void 0:e.role)==="admin"&&Q()},[a,e,M,A]);let Q=async()=>{try{L(!0);let[e,a,t]=await Promise.all([c.T5.getKaryawan({page:M,search:A}),c.DD.getCabang(),c.jU.getJabatan()]);if(e.success&&e.data?(_(e.data.data||[]),B(e.data.last_page||1)):(_([]),B(1)),a.success&&a.data){let e=Array.isArray(a.data)?a.data:a.data.data;E(e)}else E([]);if(t.success&&t.data){let e=Array.isArray(t.data)?t.data:t.data.data;Z(e)}else Z([])}catch(e){N({type:"error",title:"Error",message:e.message||"Gagal memuat data"})}finally{L(!1)}},V=async e=>{e.preventDefault(),G({}),X(!0);try{let e={...F,cabang_id:parseInt(F.cabang_id),jabatan_id:parseInt(F.jabatan_id)},a=R?await c.T5.updateKaryawan(R,e):await c.T5.createKaryawan(e);if(a.success)N({type:"success",title:"Berhasil",message:R?"Karyawan berhasil diperbarui":"Karyawan berhasil ditambahkan"}),P(!1),ee(),Q();else if(a.errors)G(a.errors);else throw Error(a.message)}catch(e){N({type:"error",title:"Error",message:e.message||"Gagal menyimpan data"})}finally{X(!1)}},Y=e=>{q(e.id),H({nama:e.nama,telepon:e.telepon||"",alamat:e.alamat||"",cabang_id:e.cabang_id.toString(),jabatan_id:e.jabatan_id.toString(),finger_id:e.fingerprint_id||"",status:e.status}),P(!0)},$=async e=>{if(confirm("Apakah Anda yakin ingin menghapus karyawan ini?"))try{let a=await c.T5.deleteKaryawan(e);if(a.success)N({type:"success",title:"Berhasil",message:"Karyawan berhasil dihapus"}),Q();else throw Error(a.message)}catch(e){N({type:"error",title:"Error",message:e.message||"Gagal menghapus karyawan"})}},ee=()=>{H({nama:"",telepon:"",alamat:"",cabang_id:"",jabatan_id:"",finger_id:"",status:"aktif"}),G({}),q(null)},ea=()=>{P(!1),ee()},et=e=>"aktif"===e?(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Aktif"}):(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-danger-100 text-danger-800",children:"Tidak Aktif"});return t||!a||(null==e?void 0:e.role)!=="admin"?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner w-8 h-8"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Manajemen Karyawan - AFMS"}),(0,s.jsx)("meta",{name:"description",content:"Kelola data karyawan"})]}),(0,s.jsxs)(m.Z,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Karyawan"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Kelola data karyawan perusahaan"})]}),(0,s.jsx)(x.z,{onClick:()=>P(!0),leftIcon:(0,s.jsx)(h.Z,{className:"h-4 w-4"}),children:"Tambah Karyawan"})]})}),(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,s.jsx)("div",{className:"max-w-md",children:(0,s.jsx)(u.I,{type:"text",placeholder:"Cari karyawan...",value:A,onChange:e=>I(e.target.value),leftIcon:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})})}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontak"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cabang"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:K?[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-20"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-16"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"animate-pulse h-6 bg-gray-200 rounded w-12"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"animate-pulse flex space-x-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"})]})})]},a)):0===k.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Tidak ada data karyawan"})}):k.map(e=>{var a,t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"h-5 w-5 text-primary-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nama}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.fingerprint_id||"-"]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.telepon})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-900",children:(null===(a=e.cabang)||void 0===a?void 0:a.nama_cabang)||"-"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-900",children:(null===(t=e.jabatan)||void 0===t?void 0:t.nama_jabatan)||"-"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:et(e.status)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>W(D===e.id?null:e.id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,s.jsx)(f,{className:"h-5 w-5"})}),D===e.id&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[(0,s.jsxs)("button",{onClick:()=>{Y(e),W(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Ubah"})]}),(0,s.jsxs)("button",{onClick:()=>{$(e.id),W(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[(0,s.jsx)(w.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Hapus"})]})]})]})})]},e.id)})})]})}),z>1&&(0,s.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)(x.z,{variant:"outline",onClick:()=>T(Math.max(1,M-1)),disabled:1===M,children:"Sebelumnya"}),(0,s.jsx)(x.z,{variant:"outline",onClick:()=>T(Math.min(z,M+1)),disabled:M===z,children:"Selanjutnya"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Halaman ",(0,s.jsx)("span",{className:"font-medium",children:M})," dari"," ",(0,s.jsx)("span",{className:"font-medium",children:z})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,s.jsx)(x.z,{variant:"outline",onClick:()=>T(Math.max(1,M-1)),disabled:1===M,children:"Sebelumnya"}),(0,s.jsx)(x.z,{variant:"outline",onClick:()=>T(Math.min(z,M+1)),disabled:M===z,children:"Selanjutnya"})]})})]})]})]})]}),O&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-gray-900 dark:bg-opacity-75 overflow-y-auto h-full w-full z-50",children:(0,s.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800 dark:border-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:R?"Edit Karyawan":"Tambah Karyawan"}),(0,s.jsx)("button",{onClick:ea,className:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100",children:(0,s.jsx)(v.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,s.jsx)(u.I,{label:"Nama",type:"text",value:F.nama,onChange:e=>H({...F,nama:e.target.value}),error:J.nama,required:!0}),(0,s.jsx)(u.I,{label:"No. HP",type:"text",value:F.telepon,onChange:e=>H({...F,telepon:e.target.value}),error:J.telepon,required:!0}),(0,s.jsx)(u.I,{label:"Alamat",type:"text",value:F.alamat,onChange:e=>H({...F,alamat:e.target.value}),error:J.alamat,required:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cabang"}),(0,s.jsxs)("select",{value:F.cabang_id,onChange:e=>H({...F,cabang_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih Cabang"}),C.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nama_cabang},e.id))]}),J.cabang_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:J.cabang_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Jabatan"}),(0,s.jsxs)("select",{value:F.jabatan_id,onChange:e=>H({...F,jabatan_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih Jabatan"}),S.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nama_jabatan},e.id))]}),J.jabatan_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:J.jabatan_id})]}),(0,s.jsx)(u.I,{label:"Finger ID (Opsional)",type:"text",value:F.finger_id,onChange:e=>H({...F,finger_id:e.target.value}),error:J.finger_id}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:F.status,onChange:e=>H({...F,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"aktif",children:"Aktif"}),(0,s.jsx)("option",{value:"nonaktif",children:"Tidak Aktif"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(x.z,{type:"button",variant:"outline",onClick:ea,children:"Batal"}),(0,s.jsx)(x.z,{type:"submit",loading:U,children:R?"Perbarui":"Simpan"})]})]})]})})]})]})}},3069:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});a.Z=r},1182:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});a.Z=r},3681:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});a.Z=r},4991:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});a.Z=r}},function(e){e.O(0,[474,795,903,888,774,179],function(){return e(e.s=6841)}),_N_E=e.O()}]);