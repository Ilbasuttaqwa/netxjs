(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(700)}])},7375:function(e,a,t){"use strict";var s=t(5893),r=t(7294),n=t(6495),l=t(3148),i=t(6458),o=t(4607),c=t(5770);l.kL.register(l.uw,l.f$,l.od,l.jn,l.Dx,l.u,l.De),a.Z=()=>{let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[d,u]=(0,r.useState)("7days"),{addToast:m}=(0,o.p)(),{user:g,isAuthenticated:h}=(0,c.a)();(0,r.useEffect)(()=>{if(h&&g){let e=setTimeout(()=>{x()},100);return()=>clearTimeout(e)}},[d,h,g]);let x=async()=>{try{l(!0);let e=await i.kx.getAttendanceChart(d);if(e.success&&e.data)a(e.data);else throw Error(e.message)}catch(e){m({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat data chart"})}finally{l(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Grafik Kehadiran"}),(0,s.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"7days",children:"7 Hari Terakhir"}),(0,s.jsx)("option",{value:"30days",children:"30 Hari Terakhir"}),(0,s.jsx)("option",{value:"3months",children:"3 Bulan Terakhir"})]})]}),(0,s.jsx)("div",{className:"h-80",children:t||!h?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("div",{className:"loading-spinner w-8 h-8"})}):(0,s.jsx)(n.x1,{data:e||{labels:["Sen","Sel","Rab","Kam","Jum","Sab","Min"],datasets:[{label:"Hadir",data:[65,59,80,81,56,55,40],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4},{label:"Terlambat",data:[28,48,40,19,86,27,90],borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",tension:.4},{label:"Alpha",data:[12,19,3,5,2,3,20],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1}},hover:{mode:"nearest",intersect:!0},scales:{x:{display:!0,title:{display:!0,text:"Tanggal"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Jumlah"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},elements:{point:{radius:4,hoverRadius:6}}}})})]})}},9262:function(e,a,t){"use strict";t.d(a,{Uc:function(){return o},Y1:function(){return c}});var s=t(5893),r=t(7294),n=t(1163),l=t(5770),i=t(5720);function o(e){let a=a=>{let{user:t,isLoading:o,isAuthenticated:c}=(0,l.a)(),d=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(!o){if(!c){d.replace("/login");return}if(t&&"manager"!==t.role){"admin"===t.role?d.replace("/admin/dashboard"):d.replace("/dasbor");return}}},[t,o,c,d]),!o&&c&&t&&"manager"===t.role)?(0,s.jsx)(e,{...a}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(i.Z,{})})};return a.displayName="withManagerAuth(".concat(e.displayName||e.name||"Component",")"),a}function c(e){let a=a=>{let{user:t,isLoading:o,isAuthenticated:c}=(0,l.a)(),d=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(!o){if(!c){d.replace("/login");return}if(t&&!["admin","manager"].includes(t.role)){d.replace("/dasbor");return}}},[t,o,c,d]),!o&&c&&t&&["admin","manager"].includes(t.role))?(0,s.jsx)(e,{...a}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(i.Z,{})})};return a.displayName="withAdminOrManagerAuth(".concat(e.displayName||e.name||"Component",")"),a}},700:function(e,a,t){"use strict";t.r(a);var s=t(5893),r=t(7294),n=t(1163),l=t(3903),i=t(9262),o=t(5770),c=t(2964),d=t(8482),u=t(7375),m=t(5892),g=t(3146),h=t(1429),x=t(3431),b=t(9711),p=t(2044),f=t(2294),j=t(68),y=t(7530);a.default=(0,i.Y1)(function(){var e,a;let{user:t}=(0,o.a)(),i=(0,n.useRouter)(),[w,N]=(0,r.useState)({totalEmployees:0,totalBranches:0,todayAttendance:0,lateToday:0,absentToday:0,attendancePercentage:0}),[v,k]=(0,r.useState)(!0),[Z,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=await fetch("/api/dasbor/stats");if(e.ok){let a=await e.json();N(a)}}catch(e){N({totalEmployees:0,totalBranches:0,todayAttendance:0,lateToday:0,absentToday:0,attendancePercentage:0})}finally{k(!1)}};if(v)return(0,s.jsx)(l.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})});if(!t||!["admin","manager"].includes(t.role))return null;let S=new Date,E=S.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),_=S.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Admin"}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:["Selamat datang, ",t.nama_pegawai," (",t.role,")"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[null===(e=t.jabatan)||void 0===e?void 0:e.nama_jabatan," - ",null===(a=t.cabang)||void 0===a?void 0:a.nama_cabang]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:_}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:E})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(c.Z,{title:"Total Karyawan",value:w.totalEmployees.toString(),icon:(0,s.jsx)(m.Z,{className:"h-6 w-6"}),color:"info"}),(0,s.jsx)(c.Z,{title:"Total Cabang",value:w.totalBranches.toString(),icon:(0,s.jsx)(g.Z,{className:"h-6 w-6"}),color:"success"}),(0,s.jsx)(c.Z,{title:"Hadir Hari Ini",value:w.todayAttendance.toString(),icon:(0,s.jsx)(h.Z,{className:"h-6 w-6"}),color:"primary"}),(0,s.jsx)(c.Z,{title:"Terlambat Hari Ini",value:w.lateToday.toString(),icon:(0,s.jsx)(x.Z,{className:"h-6 w-6"}),color:"warning"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(c.Z,{title:"Alpha Hari Ini",value:w.absentToday.toString(),icon:(0,s.jsx)(b.Z,{className:"h-6 w-6"}),color:"danger"}),(0,s.jsx)(c.Z,{title:"Persentase Kehadiran",value:"".concat(w.attendancePercentage,"%"),icon:(0,s.jsx)(p.Z,{className:"h-6 w-6"}),color:"success"}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>C(!Z),className:"w-full flex items-center justify-between px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,s.jsx)("span",{className:"font-medium",children:"Aksi Cepat"}),(0,s.jsx)(f.Z,{className:"h-5 w-5 transition-transform ".concat(Z?"rotate-180":"")})]}),Z&&(0,s.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[(0,s.jsxs)("button",{onClick:()=>{i.push("/admin/pemantauan"),C(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[(0,s.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Pemantauan Sidik Jari"})]}),(0,s.jsxs)("button",{onClick:()=>{i.push("/admin/karyawan"),C(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center gap-3 border-b border-gray-100",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Kelola Karyawan"})]}),(0,s.jsxs)("button",{onClick:()=>{i.push("/admin/absensi"),C(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center gap-3",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 text-purple-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Laporan Absensi"})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(d.Z,{})]})]})})})},2294:function(e,a,t){"use strict";var s=t(7294);let r=s.forwardRef(function(e,a){let{title:t,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});a.Z=r}},function(e){e.O(0,[196,474,795,32,903,466,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);