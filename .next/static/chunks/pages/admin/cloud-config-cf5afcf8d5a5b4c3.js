(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{7142:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/cloud-config",function(){return s(929)}])},4680:function(e,t,s){"use strict";var a=s(5893);s(7294);var r=s(8660);let n=e=>{let{children:t,className:s,variant:n="default",padding:l="md",hover:i=!1,animate:c=!1}=e;return(0,a.jsx)("div",{className:(0,r.cn)("transition-all duration-300",(()=>{switch(n){case"glass":return"glass rounded-2xl shadow-xl";case"elevated":return"card-modern";case"outlined":return"bg-white/95 dark:bg-slate-800/95 border border-violet-200/50 dark:border-violet-700/50 hover:border-violet-300 dark:hover:border-violet-600 transition-all duration-300 backdrop-blur-md";default:return"card"}})(),(()=>{switch(l){case"none":return"";case"sm":return"p-4";case"md":default:return"p-6";case"lg":return"p-8"}})(),i&&"hover-lift cursor-pointer group",c&&"animate-fade-in",s),children:t})};n.Header=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("card-header",s),children:t})},n.Body=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("card-body",s),children:t})},n.Footer=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("card-footer",s),children:t})},t.Z=n},1774:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(5893),r=s(7294),n=s(8660);let l=(0,r.forwardRef)((e,t)=>{let{className:s,type:r,label:l,error:i,helperText:c,leftIcon:d,rightIcon:o,id:m,...x}=e,u=m||"input-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[l&&(0,a.jsx)("label",{htmlFor:u,className:"form-label",children:l}),(0,a.jsxs)("div",{className:"relative",children:[d&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:d})}),(0,a.jsx)("input",{type:r,id:u,className:(0,n.cn)("form-input-modern",d&&"pl-12",o&&"pr-12",i&&"border-red-400 focus:border-red-500 focus:ring-red-500 shadow-glow-rose","focus:shadow-glow transition-all duration-300",s),ref:t,...x}),o&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:o})})]}),i&&(0,a.jsx)("p",{className:"form-error",children:i}),c&&!i&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:c})]})});l.displayName="Input"},929:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),n=s(5770),l=s(1163),i=s(9008),c=s.n(i),d=s(3903),o=s(7245),m=s(1774),x=s(4680),u=s(4607),h=s(3100),f=s(4910),g=s(1429),p=s(5438),v=s(9632),j=s(3431);t.default=()=>{let{user:e,isLoading:t}=(0,n.a)(),s=(0,l.useRouter)(),{showToast:i}=(0,u.p)(),[y,b]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)({server_url:"",api_key:"",sync_interval:300,retry_attempts:3,timeout:3e4,enable_auto_sync:!0,enable_offline_mode:!0,max_offline_records:1e3});(0,r.useEffect)(()=>{if(!t&&(!e||"admin"!==e.role)){s.push("/login");return}e&&E()},[e,t]);let E=async()=>{try{b(!0);let e=await fetch("/api/devices/cloud-config"),t=await e.json();t.success?S(t.data):i("Failed to load configuration","error")}catch(e){i("Error loading configuration","error")}finally{b(!1)}},Z=async()=>{try{w(!0);let e=C.id?"PUT":"POST",t=C.id?"/api/devices/cloud-config?id=".concat(C.id):"/api/devices/cloud-config",s=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),a=await s.json();a.success?(S(a.data),i("Configuration saved successfully","success")):i(a.message||"Failed to save configuration","error")}catch(e){i("Error saving configuration","error")}finally{w(!1)}},I=async()=>{try{k(!0),await new Promise(e=>setTimeout(e,2e3)),C.server_url.startsWith("http")&&C.api_key.length>0?i("Connection test successful","success"):i("Connection test failed","error")}catch(e){i("Connection test failed","error")}finally{k(!1)}},L=(e,t)=>{S(s=>({...s,[e]:t}))};return t||y?(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Cloud Server Configuration - AFMS"}),(0,a.jsx)("meta",{name:"description",content:"Configure cloud server settings for fingerprint devices"})]}),(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-blue-600"}),"Cloud Server Configuration"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure cloud server settings for fingerprint device synchronization"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.z,{onClick:I,disabled:_||!C.server_url||!C.api_key,variant:"outline",leftIcon:(0,a.jsx)(f.Z,{className:"h-4 w-4 ".concat(_?"animate-spin":"")}),children:_?"Testing...":"Test Connection"}),(0,a.jsx)(o.z,{onClick:Z,disabled:N,leftIcon:(0,a.jsx)(g.Z,{className:"h-4 w-4"}),children:N?"Saving...":"Save Configuration"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-blue-600"}),"Server Settings"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Server URL *"}),(0,a.jsx)(m.I,{type:"url",value:C.server_url,onChange:e=>L("server_url",e.target.value),placeholder:"https://your-cloud-server.com/api",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key *"}),(0,a.jsx)(m.I,{type:"password",value:C.api_key,onChange:e=>L("api_key",e.target.value),placeholder:"Enter your API key",required:!0})]})]})]})}),(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-green-600"}),"Synchronization Settings"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Interval (seconds)"}),(0,a.jsx)(m.I,{type:"number",value:C.sync_interval,onChange:e=>L("sync_interval",parseInt(e.target.value)),min:"60",max:"3600"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 60-3600 seconds"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retry Attempts"}),(0,a.jsx)(m.I,{type:"number",value:C.retry_attempts,onChange:e=>L("retry_attempts",parseInt(e.target.value)),min:"1",max:"10"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 1-10 attempts"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timeout (milliseconds)"}),(0,a.jsx)(m.I,{type:"number",value:C.timeout,onChange:e=>L("timeout",parseInt(e.target.value)),min:"5000",max:"120000"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 5000-120000 ms"})]})]})]})}),(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-purple-600"}),"Advanced Settings"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable Auto Sync"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Automatically sync data at specified intervals"})]}),(0,a.jsx)("input",{type:"checkbox",checked:C.enable_auto_sync,onChange:e=>L("enable_auto_sync",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable Offline Mode"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Store data locally when server is unavailable"})]}),(0,a.jsx)("input",{type:"checkbox",checked:C.enable_offline_mode,onChange:e=>L("enable_offline_mode",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Offline Records"}),(0,a.jsx)(m.I,{type:"number",value:C.max_offline_records,onChange:e=>L("max_offline_records",parseInt(e.target.value)),min:"100",max:"10000",disabled:!C.enable_offline_mode}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 100-10000 records"})]})]})]})}),(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-yellow-600"}),"Configuration Status"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Server URL"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(C.server_url?"text-green-600":"text-red-600"),children:C.server_url?"Configured":"Not Set"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"API Key"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(C.api_key?"text-green-600":"text-red-600"),children:C.api_key?"Configured":"Not Set"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Auto Sync"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(C.enable_auto_sync?"text-green-600":"text-gray-600"),children:C.enable_auto_sync?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Offline Mode"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(C.enable_offline_mode?"text-green-600":"text-gray-600"),children:C.enable_offline_mode?"Enabled":"Disabled"})]}),C.updated_at&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Last Updated"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:new Date(C.updated_at).toLocaleString()})]})]})]})})]})]})})]})}},4910:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))});t.Z=r},1429:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},3431:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});t.Z=r},9632:function(e,t,s){"use strict";var a=s(7294);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))});t.Z=r}},function(e){e.O(0,[474,795,903,888,774,179],function(){return e(e.s=7142)}),_N_E=e.O()}]);