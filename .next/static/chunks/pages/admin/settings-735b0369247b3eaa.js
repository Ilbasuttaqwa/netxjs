(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{8051:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings",function(){return s(4898)}])},1774:function(e,a,s){"use strict";s.d(a,{I:function(){return l}});var t=s(5893),r=s(7294),n=s(8660);let l=(0,r.forwardRef)((e,a)=>{let{className:s,type:r,label:l,error:i,helperText:d,leftIcon:c,rightIcon:m,id:o,...u}=e,h=o||"input-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[l&&(0,t.jsx)("label",{htmlFor:h,className:"form-label",children:l}),(0,t.jsxs)("div",{className:"relative",children:[c&&(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:c})}),(0,t.jsx)("input",{type:r,id:h,className:(0,n.cn)("form-input-modern",c&&"pl-12",m&&"pr-12",i&&"border-red-400 focus:border-red-500 focus:ring-red-500 shadow-glow-rose","focus:shadow-glow transition-all duration-300",s),ref:a,...u}),m&&(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:m})})]}),i&&(0,t.jsx)("p",{className:"form-error",children:i}),d&&!i&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d})]})});l.displayName="Input"},4898:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(5893),r=s(7294),n=s(9008),l=s.n(n),i=s(5770),d=s(1163),c=s(4607),m=s(3903),o=s(7245),u=s(1774),h=s(6162),x=s(5615),g=s(1263);let p=r.forwardRef(function(e,a){let{title:s,titleId:t,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))});var j=s(3252),b=()=>{let{user:e,isAuthenticated:a,isLoading:s}=(0,i.a)(),n=(0,d.useRouter)(),{addToast:b}=(0,c.p)(),[f,v]=(0,r.useState)(!0),[N,y]=(0,r.useState)(!1),[k,_]=(0,r.useState)({jam_masuk:"08:00",jam_pulang:"17:00",toleransi_keterlambatan:15,potongan_per_menit:5e3,hari_kerja:["senin","selasa","rabu","kamis","jumat"],fingerprint_device_ip:"192.168.1.100",fingerprint_device_port:4370});(0,r.useEffect)(()=>{if(!s&&!a){n.push("/login");return}if(e&&"admin"!==e.role){n.push("/dasbor");return}a&&w()},[a,s,e,n]);let w=async()=>{try{v(!0),v(!1)}catch(e){b({type:"error",title:"Gagal memuat pengaturan"}),v(!1)}},C=async e=>{e.preventDefault();try{y(!0),b({type:"success",title:"Pengaturan berhasil disimpan"})}catch(e){b({type:"error",title:"Gagal menyimpan pengaturan"})}finally{y(!1)}},E=(e,a)=>{a?_({...k,hari_kerja:[...k.hari_kerja,e]}):_({...k,hari_kerja:k.hari_kerja.filter(a=>a!==e)})},P=async()=>{try{b({type:"info",title:"Menguji koneksi fingerprint..."}),b({type:"success",title:"Koneksi fingerprint berhasil!"})}catch(e){b({type:"error",title:"Gagal terhubung ke perangkat fingerprint"})}};return s?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a&&(null==e?void 0:e.role)==="admin"?(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(l(),{children:(0,t.jsx)("title",{children:"Pengaturan Sistem - AFMS"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengaturan Sistem"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Konfigurasi sistem absensi dan fingerprint"})]}),f?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,t.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Jam Kerja"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Masuk"}),(0,t.jsx)(u.I,{type:"time",value:k.jam_masuk,onChange:e=>_({...k,jam_masuk:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Pulang"}),(0,t.jsx)(u.I,{type:"time",value:k.jam_pulang,onChange:e=>_({...k,jam_pulang:e.target.value}),required:!0})]})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Aturan Absensi"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Toleransi Keterlambatan (menit)"}),(0,t.jsx)(u.I,{type:"number",value:k.toleransi_keterlambatan,onChange:e=>_({...k,toleransi_keterlambatan:Number(e.target.value)}),min:"0",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Potongan per Menit (Rp)"}),(0,t.jsx)(u.I,{type:"number",value:k.potongan_per_menit,onChange:e=>_({...k,potongan_per_menit:Number(e.target.value)}),min:"0",required:!0})]})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Hari Kerja"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"senin",label:"Senin"},{value:"selasa",label:"Selasa"},{value:"rabu",label:"Rabu"},{value:"kamis",label:"Kamis"},{value:"jumat",label:"Jumat"},{value:"sabtu",label:"Sabtu"},{value:"minggu",label:"Minggu"}].map(e=>(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:k.hari_kerja.includes(e.value),onChange:a=>E(e.value,a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(p,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Perangkat Fingerprint"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address Perangkat"}),(0,t.jsx)(u.I,{type:"text",value:k.fingerprint_device_ip,onChange:e=>_({...k,fingerprint_device_ip:e.target.value}),placeholder:"192.168.1.100",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),(0,t.jsx)(u.I,{type:"number",value:k.fingerprint_device_port,onChange:e=>_({...k,fingerprint_device_port:Number(e.target.value)}),placeholder:"4370",min:"1",max:"65535",required:!0})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:P,children:"Test Koneksi"})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(o.z,{type:"submit",disabled:N,className:"inline-flex items-center",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Simpan Pengaturan"]})})})]})]})]}):null}},1263:function(e,a,s){"use strict";var t=s(7294);let r=t.forwardRef(function(e,a){let{title:s,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),s?t.createElement("title",{id:r},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});a.Z=r}},function(e){e.O(0,[474,795,903,888,774,179],function(){return e(e.s=8051)}),_N_E=e.O()}]);